{
  "version": "1.2",
  "lessons": [
    {
      "id": "l1_intro",
      "title": "1. Pine Script 简介与结构",
      "subtitle": "Hello Pine! 脚本结构与版本声明",
      "concept": "<h3>什么是 Pine Script？</h3>\n<p>Pine Script 是 TradingView 的图表脚本语言，专门用来写<b>指标（indicator）</b>和<b>策略（strategy）</b>。它的执行模型是“按时间序列逐根计算”：历史回放时会从最早一根 K 线开始，逐根执行到最新一根。</p>\n<div class=\"detail-box\">\n  <h4>输入 / 输出（先建立正确的心智模型）</h4>\n  <ul>\n    <li><b>输入:</b> 图表数据（open/high/low/close/volume）、时间（time）、标的信息（syminfo.*）以及你的 <code>input.*</code> 参数。</li>\n    <li><b>输出:</b> 指标脚本输出曲线/形状/标签；策略脚本额外输出回测订单、权益曲线与统计。</li>\n  </ul>\n</div>\n<h3>脚本最小结构</h3>\n<ul>\n  <li><b>版本声明:</b> <code>//@version=5</code></li>\n  <li><b>声明语句（二选一）:</b> <code>indicator()</code> 或 <code>strategy()</code></li>\n  <li><b>主逻辑:</b> 变量、计算、绘图/下单</li>\n</ul>\n<h3>边界与注意事项</h3>\n<ul>\n  <li><b>历史长度不足会得到 na:</b> 例如 20 周期均线在前 19 根无法计算，后续逻辑要用 <code>na</code>/<code>nz()</code> 处理。</li>\n  <li><b>不要“偷看未来”:</b> 多周期/外部数据引用要理解 <code>request.security</code> 的对齐与确认机制，否则回测会虚高。</li>\n  <li><b>性能:</b> 尽量复用内置函数，避免在每根 K 线上创建大量 label/line；需要对象时优先只在 <code>barstate.islast</code> 创建。</li>\n</ul>\n<h3>进阶补充：深入理解执行模型</h3>\n<h4>1. 执行模型（Execution Model）</h4>\n<p>Pine Script 的运行机制与普通 Python 脚本完全不同。它不是只运行一次，而是<b>在每一根 K 线上重新运行一遍整个脚本</b>。</p>\n<ul>\n  <li><b>历史回放（Historical Bars）：</b> 脚本从图表最左侧的第一根 K 线开始，按顺序执行到最新一根。每执行完一根，计算结果（变量值、绘图状态）会被保存到时间序列中。</li>\n  <li><b>实时更新（Realtime Bars）：</b> 当脚本运行到最后一根（实时 K 线）时，每次价格变动（Tick）都会触发脚本重新运行。这意味着在实时 K 线未收盘（Confirmed）之前，变量值可能会不断跳变（Repainting）。</li>\n  <li><b>Bar 状态变量：</b> 使用 <code>barstate.isconfirmed</code> 来判断当前 K 线是否已收盘（不再变化），这对策略信号至关重要。</li>\n</ul>\n<h4>2. Indicator vs Strategy 的本质区别</h4>\n<ul>\n  <li><b>Indicator（指标）：</b> 轻量级，主要用于可视化。它的计算不影响回测引擎。</li>\n  <li><b>Strategy（策略）：</b> 包含回测引擎接口。<code>strategy.entry</code> 等函数不仅仅是记录，它们会与内置的 broker 模拟器交互，处理滑点、手续费、资金管理，并生成回测报告。</li>\n</ul>\n<h4>3. 常见陷阱：重绘（Repainting）</h4>\n<p>如果在实时 K 线（未确认状态）触发了信号并立即报警，但随后价格回落导致信号消失，这就是“信号闪烁”或“重绘”。<b>解决方案：</b> 始终在 <code>barstate.isconfirmed</code> 为真时才确认信号。</p>",
      "summary": [
        "必须以 //@version=5 开头，且 indicator/strategy 二选一",
        "脚本按 K 线逐根执行，变量默认是时间序列（series）",
        "输入来自 OHLCV、time、syminfo 与 input.* 参数",
        "输出是绘图对象；策略额外输出回测交易与统计",
        "历史不足会产生 na，逻辑里要显式处理",
        "多周期引用要避免未来函数导致回测虚高"
      ],
      "pine_code": "//@version=5\nindicator(\"Hello Pine\")\n\n// 绘制收盘价\nplot(close)",
      "python_code": "# Python (Backtrader 示例)\nclass HelloStrategy(bt.Strategy):\n    def next(self):\n        # 对应 plot(close)\n        # Backtrader 自动处理绘图\n        pass\n\n# Python (Pandas 示例)\nimport matplotlib.pyplot as plt\ndf['close'].plot()",
      "quiz": [
        {
          "q": "Pine Script v5 脚本的第一行必须是什么？",
          "choices": [
            {
              "text": "import pandas",
              "isCorrect": false
            },
            {
              "text": "//@version=5",
              "isCorrect": true
            },
            {
              "text": "indicator()",
              "isCorrect": false
            }
          ],
          "explain": "所有 v5 脚本必须以 //@version=5 开头，否则会被视为旧版本。"
        },
        {
          "q": "indicator() 函数的主要用途是什么？",
          "choices": [
            {
              "text": "进行回测",
              "isCorrect": false
            },
            {
              "text": "显示指标和图表",
              "isCorrect": true
            },
            {
              "text": "下单交易",
              "isCorrect": false
            }
          ],
          "explain": "indicator() 声明脚本为指标，主要用于计算和绘图；strategy() 用于回测和模拟交易。"
        },
        {
          "q": "Pine Script 代码的执行方式是怎样的？",
          "choices": [
            {
              "text": "只运行一次",
              "isCorrect": false
            },
            {
              "text": "在每根 K 线上从头到尾执行一次",
              "isCorrect": true
            },
            {
              "text": "仅在最新 K 线运行",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 的核心是自动迭代模型，脚本会针对历史数据中的每根 Bar 运行一次。"
        },
        {
          "q": "以下哪个不是 Pine Script 的内置变量？",
          "choices": [
            {
              "text": "open",
              "isCorrect": false
            },
            {
              "text": "volume",
              "isCorrect": false
            },
            {
              "text": "pandas_df",
              "isCorrect": true
            }
          ],
          "explain": "open, close, volume 等是内置变量。pandas_df 是 Python Pandas 的概念。"
        },
        {
          "q": "strategy() 和 indicator() 可以同时存在吗？",
          "choices": [
            {
              "text": "可以",
              "isCorrect": false
            },
            {
              "text": "不可以",
              "isCorrect": true
            },
            {
              "text": "仅在 v4 版本可以",
              "isCorrect": false
            }
          ],
          "explain": "一个脚本只能声明为 strategy 或 indicator 之一，不能同时声明。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l2_vars_types",
      "title": "2. 变量与数据类型",
      "subtitle": "int, float, bool, string, color, na",
      "concept": "<h3>变量是什么？先分清 series 与“普通值”</h3>\n<p>Pine 是强类型语言，但支持类型推断。更关键的是：大多数变量默认都是<b>时间序列（series）</b>，也就是“每根 K 线都有一个值”。你在代码里写的只是“当前 K 线这一次执行”的结果，历史会自动存下来供 <code>[]</code> 引用。</p>\n<div class=\"detail-box\">\n  <h4>声明与赋值（最常用三件套）</h4>\n  <ul>\n    <li><b>=</b>: 声明并赋值（每根 K 线都会重新计算一遍）。</li>\n    <li><b>var</b>: 只在第一根 K 线初始化一次，后续保持状态（常用来做计数器、累计值、数组、Map）。</li>\n    <li><b>:=</b>: 对已声明变量重新赋值（更新状态）。</li>\n  </ul>\n</div>\n<h3>常见数据类型（以及你会踩的坑）</h3>\n<ul>\n  <li><b>int / float:</b> 数值。建议在关键变量上显式声明类型（例如 <code>var float</code>），减少类型不匹配。</li>\n  <li><b>bool:</b> 条件结果，常用于信号与过滤。</li>\n  <li><b>string:</b> 文本，常用于 label/log。</li>\n  <li><b>color:</b> 颜色对象，可用 <code>color.new(base, transp)</code> 控制透明度。</li>\n  <li><b>na:</b> 缺失值（类似 Python 的 None/NaN）。任何与 na 的计算通常也会得到 na。</li>\n</ul>\n<h3>输入 / 输出与边界条件</h3>\n<ul>\n  <li><b>输入:</b> 当前 bar 的价格/成交量序列，以及你维护的状态变量（var）。</li>\n  <li><b>输出:</b> 计算出来的 series（用于 plot 或作为下游函数输入）。</li>\n  <li><b>边界:</b> 刚开始的几根 K 线历史不足会产生 na；用 <code>na(x)</code> 判断，用 <code>nz(x, fallback)</code> 给默认值。</li>\n  <li><b>性能:</b> 大对象（array/map）务必用 <code>var</code> 初始化一次，否则每根 K 线重建会明显变慢。</li>\n</ul>\n<h3>进阶补充：类型系统与状态管理</h3>\n<h4>1. 复杂的类型限定符（Qualifiers）</h4>\n<p>Pine Script 的类型不仅仅是 <code>int</code> 或 <code>float</code>，还包含“形式”（Form）：</p>\n<ul>\n  <li><b>const:</b> 编译时常量（如 <code>1</code>, <code>\"SMA\"</code>）。值永远不变。</li>\n  <li><b>input:</b> 用户在设置面板输入的值。在脚本运行期间不变，但改变设置会重启脚本。</li>\n  <li><b>simple:</b> 脚本逻辑中计算出的、但整个运行周期内保持不变的值。</li>\n  <li><b>series:</b> 最常见的形式。值可以随每根 K 线变化（如 <code>close</code>, <code>ta.sma(close, 14)</code>）。</li>\n</ul>\n<p><b>注意：</b> 你不能把 <code>series</code> 赋值给需要 <code>input</code> 或 <code>simple</code> 的参数。例如，<code>input.int(close)</code> 是错误的，因为 <code>close</code> 是变化的，而 <code>input</code> 必须是固定的。</p>\n<h4>2. na 的传播机制</h4>\n<p><code>na</code> (Not Available) 类似于 SQL 的 NULL 或 Python 的 NaN。<b>任何与 na 的运算结果通常也是 na。</b></p>\n<pre><code>a = na\nb = a + 1  // b 也是 na\nc = nz(a, 0) + 1 // c 是 1，因为 nz 把 na 变成了 0\n</code></pre>\n<h4>3. var vs varip：状态持久化</h4>\n<ul>\n  <li><b>var:</b> 变量只在第一根 K 线初始化一次。后续 K 线会自动继承上一根 K 线该变量的最终值。用于累加器、状态机。</li>\n  <li><b>varip (Intrabar Persist):</b> 类似于 <code>var</code>，但它在<b>实时 K 线的每一次 Tick 更新</b>之间也能保持状态。常用于记录单根 K 线内的最高价/最低价轨迹，或统计 Tick 数量。</li>\n</ul>",
      "summary": [
        "多数变量是 series（每根 K 线都有值）",
        "var 用于“只初始化一次”的状态变量与集合",
        ":= 用于更新已存在变量（维持状态）",
        "na 是缺失值，常用 na()/nz() 做判断与兜底",
        "显式类型（int/float）可减少类型不匹配问题"
      ],
      "pine_code": "//@version=5\nindicator(\"Vars\")\n\n// 普通变量 (每根K线重置)\na = close \n\n// 状态变量 (只初始化一次)\nvar float sum_vol = 0.0\nsum_vol := sum_vol + volume\n\nplot(sum_vol)",
      "python_code": "# Python (Backtrader)\ndef __init__(self):\n    # 对应 var (只初始化一次)\n    self.sum_vol = 0.0 \n\ndef next(self):\n    # 对应 a = close\n    a = self.data.close[0] \n    \n    # 对应 sum_vol := ...\n    self.sum_vol += self.data.volume[0]",
      "quiz": [
        {
          "q": "如果想计算历史总成交量，应该用什么关键字声明变量？",
          "choices": [
            {
              "text": "=",
              "isCorrect": false
            },
            {
              "text": "var",
              "isCorrect": true
            },
            {
              "text": "const",
              "isCorrect": false
            }
          ],
          "explain": "使用 = 声明的变量在每根 K 线都会重置。使用 var 声明的变量才会保持上一根 K 线计算后的值。"
        },
        {
          "q": "修改已声明变量的值需要用哪个操作符？",
          "choices": [
            {
              "text": "=",
              "isCorrect": false
            },
            {
              "text": ":=",
              "isCorrect": true
            },
            {
              "text": "==",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 中，= 用于声明和初始化，:= 用于给已存在的变量重新赋值。"
        },
        {
          "q": "na + 1 的结果是什么？",
          "choices": [
            {
              "text": "1",
              "isCorrect": false
            },
            {
              "text": "0",
              "isCorrect": false
            },
            {
              "text": "na",
              "isCorrect": true
            }
          ],
          "explain": "na 代表缺失值，任何与 na 的算术运算结果通常都是 na。需要用 nz() 函数处理。"
        },
        {
          "q": "如何声明一个整型变量？",
          "choices": [
            {
              "text": "int x = 10",
              "isCorrect": true
            },
            {
              "text": "float x = 10",
              "isCorrect": false
            },
            {
              "text": "x : int = 10",
              "isCorrect": false
            }
          ],
          "explain": "可以直接写 x = 10 (类型推断) 或显式声明 int x = 10。"
        },
        {
          "q": "varip 关键字的作用是什么？",
          "choices": [
            {
              "text": "定义常量",
              "isCorrect": false
            },
            {
              "text": "在实时 Bar 内不重置变量",
              "isCorrect": true
            },
            {
              "text": "定义 IP 地址",
              "isCorrect": false
            }
          ],
          "explain": "varip (var intrabar persist) 允许变量在实时 K 线的多次更新之间保持状态，而不会在每次 tick 更新时回滚。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l3_operators",
      "title": "3. 运算符与历史引用",
      "subtitle": "[] 操作符是量化的核心",
      "concept": "<h3>[] 历史引用：为什么它是量化的核心</h3>\n<p><code>[]</code> 让你在“当前这根 K 线”拿到过去的值：<code>close[1]</code> 是上一根收盘价，<code>close[2]</code> 是上两根。几乎所有信号（交叉、突破、背离）本质都是“当前 vs 过去”的比较。</p>\n<div class=\"detail-box\">\n  <h4>输入 / 输出</h4>\n  <ul>\n    <li><b>输入:</b> 任意 series（价格、指标、你自己的变量）。</li>\n    <li><b>输出:</b> 该 series 在过去某根 bar 上的值（仍然是 series）。</li>\n  </ul>\n</div>\n<h3>边界条件（必须记住）</h3>\n<ul>\n  <li><b>历史不足会返回 na:</b> 在最开始的 bar 上，<code>close[100]</code> 取不到值，会得到 na。</li>\n  <li><b>[] 不是数组索引:</b> 它只用于时间序列回看；真正的数组请用 <code>array.get</code>/<code>array.set</code>。</li>\n  <li><b>避免未来函数:</b> 多周期引用时要理解数据何时“确认”，否则你可能在小周期提前看到大周期的最终值。</li>\n</ul>\n<h3>其他常用运算符（写策略必备）</h3>\n<ul>\n  <li><b>算术:</b> +, -, *, /, %</li>\n  <li><b>比较:</b> >, <, >=, <=, ==, !=</li>\n  <li><b>逻辑:</b> and, or, not</li>\n  <li><b>三元:</b> condition ? value1 : value2（常用于条件绘图/条件止损）</li>\n</ul>\n<h3>进阶补充：历史引用与运算细节</h3>\n<h4>1. [] 操作符的深层含义</h4>\n<p><code>[]</code> 并不是数组索引，而是<b>时间序列的回溯操作符</b>。</p>\n<ul>\n  <li><code>close[0]</code> 等同于 <code>close</code>（当前值）。</li>\n  <li><code>close[1]</code> 是<b>当前脚本执行时</b>所看到的“前一根 K 线”的值。</li>\n  <li><b>重要陷阱：</b> 如果你在一个条件分支（<code>if</code>）里调用函数，该函数的内部历史一致性可能会被破坏。Pine Script 运行时会尝试处理，但最佳实践是<b>不要在条件块内调用依赖历史的函数</b>（如 <code>ta.ema</code>），除非你明确知道自己在做什么。</li>\n</ul>\n<h4>2. 赋值运算符：= vs :=</h4>\n<ul>\n  <li><code>=</code>：<b>声明并初始化</b>一个新变量。在每根 K 线执行时，都会创建一个新的局部变量。</li>\n  <li><code>:=</code>：<b>重新赋值</b>给已存在的变量。常配合 <code>var</code> 使用，用于更新状态。</li>\n</ul>\n<pre><code>// 错误示例\nvar count = 0\ncount = count + 1 // 报错！因为 count 已经存在，不能再用 = 声明\n\n// 正确示例\nvar count = 0\ncount := count + 1 // 正确，更新 count 的值\n</code></pre>",
      "summary": [
        "[] 用于回看时间序列：close[1] 是上一根",
        "历史不足会得到 na，需要逻辑里处理",
        "[] 不是数组索引，数组请用 array.get/set",
        "Pandas 用 shift(1)，Backtrader 用 [-1] 对照理解"
      ],
      "pine_code": "//@version=5\nindicator(\"Operators\")\n\n// 涨跌：当前收盘 - 昨日收盘\nchange = close - close[1]\n\n// 三元运算：如果是涨显示绿色，否则红色\nc = change > 0 ? color.green : color.red\n\nplot(change, color=c)",
      "python_code": "# Python (Pandas)\ndf['change'] = df['close'] - df['close'].shift(1)\n\n# Python (Backtrader)\nchange = self.data.close[0] - self.data.close[-1]\nc = 'green' if change > 0 else 'red'",
      "quiz": [
        {
          "q": "close[1] 在 Python Pandas 中对应什么？",
          "choices": [
            {
              "text": "df['close'].shift(1)",
              "isCorrect": true
            },
            {
              "text": "df['close'][1]",
              "isCorrect": false
            },
            {
              "text": "df['close'].iloc[1]",
              "isCorrect": false
            }
          ],
          "explain": "shift(1) 将数据向下移动一行，用于获取前一个时间点的数据。直接索引 [1] 通常是指第 2 行数据，而不是'前一行'。"
        },
        {
          "q": "在 Backtrader 中，self.data.close[0] 代表什么？",
          "choices": [
            {
              "text": "第一根 K 线",
              "isCorrect": false
            },
            {
              "text": "当前 K 线",
              "isCorrect": true
            },
            {
              "text": "最后一根 K 线",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 使用相对索引，0 是当前，-1 是前一根，-2 是前两根。"
        },
        {
          "q": "Pine Script 中 and 操作符的作用是？",
          "choices": [
            {
              "text": "逻辑或",
              "isCorrect": false
            },
            {
              "text": "逻辑与",
              "isCorrect": true
            },
            {
              "text": "位运算与",
              "isCorrect": false
            }
          ],
          "explain": "and 是逻辑与，or 是逻辑或。"
        },
        {
          "q": "表达式 high > high[1] 的含义是？",
          "choices": [
            {
              "text": "当前最高价大于前一根最高价",
              "isCorrect": true
            },
            {
              "text": "当前最高价大于所有历史最高价",
              "isCorrect": false
            },
            {
              "text": "语法错误",
              "isCorrect": false
            }
          ],
          "explain": "high[1] 是前一根 Bar 的最高价。"
        },
        {
          "q": "三元运算符 condition ? a : b 的作用是？",
          "choices": [
            {
              "text": "如果 condition 为真返回 a，否则返回 b",
              "isCorrect": true
            },
            {
              "text": "如果 condition 为真返回 b，否则返回 a",
              "isCorrect": false
            },
            {
              "text": "循环执行 a 和 b",
              "isCorrect": false
            }
          ],
          "explain": "这是标准的三元条件运算，用于简化 if-else 逻辑。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l4_control_flow",
      "title": "4. 控制流 (Control Flow)",
      "subtitle": "if, switch, for, while",
      "concept": "<h3>控制流的本质：让“规则”可执行</h3>\n<p>控制流（if/switch/for/while）用来把你的交易规则写成“机器可以严格执行”的逻辑。Pine 的特点是：这段逻辑会在每根 K 线上重复执行，所以你写的分支与循环要同时考虑<b>正确性</b>与<b>性能</b>。</p>\n<div class=\"detail-box\">\n  <h4>1) if 是表达式（非常实用）</h4>\n  <p>if 可以直接返回值，常用来生成条件序列：</p>\n  <pre><code>val = if condition\n    10\nelse\n    20</code></pre>\n</div>\n<h3>2) switch：多分支更清晰</h3>\n<p>当分支很多时，用 switch 可以避免多层 if-else。它常用于“参数选项 → 不同计算方式”的场景（例如 MA 类型选择）。</p>\n<h3>3) 循环：能不用就不用，但必须会</h3>\n<ul>\n  <li><b>for:</b> <code>for i = 0 to 10</code>（包含边界）。适合做有限窗口内的自定义累加。</li>\n  <li><b>while:</b> <code>while condition</code>。更危险，容易写出无法终止或过慢的逻辑。</li>\n</ul>\n<h3>边界与性能注意事项</h3>\n<ul>\n  <li><b>优先用内置函数:</b> ta.* 往往比你手写循环更快、更不容易出错。</li>\n  <li><b>循环次数要可控:</b> 长循环会显著拖慢脚本，甚至触发运行时间限制。</li>\n  <li><b>实时 bar:</b> 某些逻辑在实时 bar 会多次更新，必要时用 <code>barstate.isnew</code> 或 <code>barstate.isconfirmed</code> 控制触发。</li>\n</ul>\n<h3>进阶补充：控制流的副作用</h3>\n<h4>1. 循环的重置特性</h4>\n<p><code>for</code> 和 <code>while</code> 循环在每一根 K 线上都会<b>从头开始执行</b>。你不能指望循环内部的局部变量能自动跨 K 线保存，除非你引用的是外部的 <code>var</code> 变量。</p>\n<h4>2. switch 语句的威力</h4>\n<p><code>switch</code> 比多层 <code>if-else</code> 更清晰，且支持作为表达式直接返回值。</p>\n<pre><code>// 简洁的写法\nma_color = switch\n    close > ma => color.green\n    close < ma => color.red\n    => color.gray // 默认情况\n</code></pre>\n<h4>3. 关键警告：条件块中的函数调用</h4>\n<p>这是新手最容易踩的坑：<b>在 if/for/while 内部调用 ta.* 函数。</b></p>\n<pre><code>// 危险代码！\nif close > open\n    m = ta.sma(close, 20) // 只有阳线才计算 SMA？\n    // 这会导致 SMA 的内部历史数据断裂，计算结果错误！\n</code></pre>\n<p><b>正确做法：</b> 在全局作用域计算指标，在条件块内使用结果。</p>\n<pre><code>m = ta.sma(close, 20) // 始终计算，保持历史连续\nif close > open\n    // 使用 m 做逻辑判断\n</code></pre>",
      "summary": [
        "if 可以作为表达式直接返回值",
        "switch 适合多分支逻辑，结构更清晰",
        "for 循环是包含结束值的（Inclusive）",
        "能用 ta.* 就别手写循环，性能更好",
        "实时 bar 可能重复触发，必要时用 barstate 控制"
      ],
      "pine_code": "//@version=5\nindicator(\"Control Flow\")\n\n// if 作为表达式\ntrend_msg = if close > open\n    \"Bullish\"\nelse\n    \"Bearish\"\n\n// for 循环计算过去 3 天的平均 TR\nsum_tr = 0.0\nfor i = 0 to 2\n    sum_tr := sum_tr + ta.tr[i]\navg_tr = sum_tr / 3",
      "python_code": "# Python\ntrend_msg = \"Bullish\" if close > open else \"Bearish\"\n\n# 循环计算\nsum_tr = 0.0\nfor i in range(3): # 0, 1, 2\n    sum_tr += tr_series.iloc[-(i+1)]\navg_tr = sum_tr / 3",
      "quiz": [
        {
          "q": "Pine Script 中的 for i = 1 to 3 会执行几次循环？",
          "choices": [
            {
              "text": "2次 (1, 2)",
              "isCorrect": false
            },
            {
              "text": "3次 (1, 2, 3)",
              "isCorrect": true
            },
            {
              "text": "4次 (0, 1, 2, 3)",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 的 to 关键字是包含结束值的（Inclusive）。"
        },
        {
          "q": "switch 语句主要用于什么？",
          "choices": [
            {
              "text": "循环",
              "isCorrect": false
            },
            {
              "text": "多条件分支判断",
              "isCorrect": true
            },
            {
              "text": "定义变量",
              "isCorrect": false
            }
          ],
          "explain": "switch 用于替代多个嵌套的 if-else 结构，使代码更清晰。"
        },
        {
          "q": "在 Pine Script 中，while 循环什么时候停止？",
          "choices": [
            {
              "text": "当条件为 true 时",
              "isCorrect": false
            },
            {
              "text": "当条件为 false 时",
              "isCorrect": true
            },
            {
              "text": "永远不停止",
              "isCorrect": false
            }
          ],
          "explain": "while 循环在条件变为 false 时终止。"
        },
        {
          "q": "Python 的 range(1, 3) 包含 3 吗？",
          "choices": [
            {
              "text": "包含",
              "isCorrect": false
            },
            {
              "text": "不包含",
              "isCorrect": true
            }
          ],
          "explain": "Python 的 range 是左闭右开区间，range(1, 3) 生成 1, 2。"
        },
        {
          "q": "continue 关键字的作用是？",
          "choices": [
            {
              "text": "终止循环",
              "isCorrect": false
            },
            {
              "text": "跳过本次循环剩余部分，进入下一次迭代",
              "isCorrect": true
            },
            {
              "text": "退出程序",
              "isCorrect": false
            }
          ],
          "explain": "continue 跳过本次迭代，break 终止整个循环。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l6_ta_builtins",
      "title": "5. 内置技术指标 (ta 命名空间)",
      "subtitle": "SMA, EMA, RSI, MACD",
      "concept": "<h3>什么是 ta 命名空间?</h3>\n<p>在 Pine Script v5 中，所有内置的技术分析函数都归类在 <code>ta</code> (Technical Analysis) 命名空间下。这使得代码更清晰，也便于查找。</p>\n\n<h3>常用 ta 函数分类</h3>\n\n<h4>1. 移动平均与趋势 (Moving Averages)</h4>\n<table style=\"width:100%; border-collapse: collapse; margin-bottom: 20px;\">\n  <tr style=\"background: rgba(255,255,255,0.05);\">\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">函数</th>\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">说明</th>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.sma(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">简单移动平均线 (Simple Moving Average)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.ema(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">指数移动平均线 (Exponential Moving Average)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.wma(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">加权移动平均线 (Weighted Moving Average)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.rma(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">RSI 专用移动平均 (Wilder's Smoothing)</td>\n  </tr>\n</table>\n\n<h4>2. 震荡指标 (Oscillators)</h4>\n<table style=\"width:100%; border-collapse: collapse; margin-bottom: 20px;\">\n  <tr style=\"background: rgba(255,255,255,0.05);\">\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">函数</th>\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">说明</th>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.rsi(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">相对强弱指数 (Relative Strength Index)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.macd(source, fast, slow, signal)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">MACD 指标 (返回三个值: macd线, 信号线, 柱状图)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.cci(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">商品通道指数 (Commodity Channel Index)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.stoch(source, high, low, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">随机指标 (Stochastic Oscillator)</td>\n  </tr>\n</table>\n\n<h4>3. 信号与逻辑 (Signals)</h4>\n<table style=\"width:100%; border-collapse: collapse; margin-bottom: 20px;\">\n  <tr style=\"background: rgba(255,255,255,0.05);\">\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">函数</th>\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">说明</th>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.crossover(series1, series2)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">上穿 (金叉)：当 series1 上穿 series2 时返回 true</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.crossunder(series1, series2)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">下穿 (死叉)：当 series1 下穿 series2 时返回 true</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.barssince(condition)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">计算自上次条件满足以来经过的 K 线根数</td>\n  </tr>\n</table>\n\n<h4>4. 极值与波动 (Extremes & Volatility)</h4>\n<table style=\"width:100%; border-collapse: collapse; margin-bottom: 20px;\">\n  <tr style=\"background: rgba(255,255,255,0.05);\">\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">函数</th>\n    <th style=\"text-align:left; padding:8px; border-bottom:1px solid #333;\">说明</th>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.highest(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">周期内最高值</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.lowest(source, length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">周期内最低值</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.atr(length)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">平均真实波幅 (Average True Range)</td>\n  </tr>\n  <tr>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\"><code>ta.bb(series, length, mult)</code></td>\n    <td style=\"padding:8px; border-bottom:1px solid #333;\">布林带 (Bollinger Bands)</td>\n  </tr>\n</table>\n<h3>进阶补充：内置函数的黑魔法</h3>\n<h4>1. 内部状态维护</h4>\n<p>像 <code>ta.rsi</code>, <code>ta.ema</code>, <code>ta.macd</code> 这样的函数，内部都维护着自己的历史数据缓冲区。这就是为什么必须在每根 K 线上无条件调用它们，以保证它们能“看到”完整的时间序列。</p>\n<h4>2. 命名空间</h4>\n<p>v5 版本将所有技术分析函数归类在 <code>ta.</code> (Technical Analysis) 命名空间下，数学函数在 <code>math.</code> 下。这避免了命名冲突，也让代码更易读。</p>\n<h4>3. 动态长度参数</h4>\n<p>大多数 <code>ta.*</code> 函数的 <code>length</code> 参数支持 <code>series int</code>（即每根 K 线长度可以变），但这会消耗更多性能。如果长度是固定的，建议直接传整数常量。</p>",
      "summary": [
        "所有指标函数都在 ta. 下",
        "crossover/crossunder 检测交叉信号",
        "Python 通常需要 talib 或 pandas-ta 库",
        "Backtrader 有 bt.indicators"
      ],
      "pine_code": "//@version=5\nindicator(\"TA Namespace Demo\", overlay=true)\n\n// 1. 移动平均\nma = ta.sma(close, 14)\nplot(ma, \"SMA 14\", color=color.yellow)\n\n// 2. 交叉信号\n// 检查收盘价是否上穿均线\nis_cross_up = ta.crossover(close, ma)\n\n// 3. 统计最近一次金叉以来的 K 线数\nbars_since_cross = ta.barssince(is_cross_up)\n\n// 4. 绘制信号\nplotshape(is_cross_up, style=shape.triangleup, location=location.belowbar, color=color.green)",
      "python_code": "# Python (Backtrader 对应实现)\nclass TADemo(bt.Indicator):\n    lines = ('sma', 'cross_up', 'bars_since')\n    \n    def __init__(self):\n        # 1. 移动平均\n        self.lines.sma = bt.indicators.SMA(self.data.close, period=14)\n        \n        # 2. 交叉信号 (CrossOver)\n        # bt.ind.CrossOver 返回 1.0 (上穿) 或 -1.0 (下穿)\n        self.cross = bt.indicators.CrossOver(self.data.close, self.lines.sma)\n        \n    def next(self):\n        # Backtrader 中获取\"自上次...以来\"比较麻烦\n        # 通常需要自己维护计数器\n        pass\n\n# Python (Pandas TA 库)\nimport pandas_ta as ta\ndf.ta.sma(length=14, append=True)\ndf.ta.rsi(length=14, append=True)",
      "quiz": [
        {
          "q": "如何判断 ma1 上穿 ma2？",
          "choices": [
            {
              "text": "ma1 > ma2",
              "isCorrect": false
            },
            {
              "text": "ta.crossover(ma1, ma2)",
              "isCorrect": true
            },
            {
              "text": "ta.cross(ma1, ma2)",
              "isCorrect": false
            }
          ],
          "explain": "ta.crossover 专门用于检测上穿（当前大于且上一根小于等于）。"
        },
        {
          "q": "ta.rsi(close, 14) 计算的是什么？",
          "choices": [
            {
              "text": "移动平均线",
              "isCorrect": false
            },
            {
              "text": "相对强弱指数",
              "isCorrect": true
            },
            {
              "text": "布林带",
              "isCorrect": false
            }
          ],
          "explain": "RSI (Relative Strength Index)。"
        },
        {
          "q": "ta.ema 与 ta.sma 的区别？",
          "choices": [
            {
              "text": "EMA 是加权平均，SMA 是简单平均",
              "isCorrect": true
            },
            {
              "text": "SMA 计算更快",
              "isCorrect": false
            },
            {
              "text": "没有区别",
              "isCorrect": false
            }
          ],
          "explain": "EMA (Exponential Moving Average) 对近期数据赋予更高权重。"
        },
        {
          "q": "ta.lowest(low, 20) 的作用是？",
          "choices": [
            {
              "text": "计算过去 20 根 K 线的最低价",
              "isCorrect": true
            },
            {
              "text": "计算当前最低价",
              "isCorrect": false
            },
            {
              "text": "计算 20 天前的最低价",
              "isCorrect": false
            }
          ],
          "explain": "ta.lowest 返回指定长度窗口内的最小值。"
        },
        {
          "q": "在 Python Backtrader 中，SMA 指标在哪里？",
          "choices": [
            {
              "text": "bt.indicators.SMA",
              "isCorrect": true
            },
            {
              "text": "bt.SMA",
              "isCorrect": false
            },
            {
              "text": "pandas.SMA",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 的指标库在 bt.indicators 包下。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l7_plotting",
      "title": "6. 绘图与视觉化",
      "subtitle": "plot, plotshape, bgcolor",
      "concept": "<h3>核心绘图函数详解</h3>\n<p>Pine Script 的绘图系统分为<b>静态图表 (Chart)</b> 和 <b>动态对象 (Objects)</b> 两大类。以下是详细参数说明与演示。</p>\n\n<h4>1. plot() - 通用绘图</h4>\n<p>最常用的函数，用于绘制连续数据。</p>\n<div class=\"detail-box\">\n    <h4>关键参数详解</h4>\n    <ul>\n        <li><b>series</b>: 要绘制的数据 (如 <code>close</code>, <code>ta.sma(close, 14)</code>)。</li>\n        <li><b>title</b>: 脚本设置中的显示名称 (String)。</li>\n        <li><b>color</b>: 颜色，支持透明度 (<code>color.new(color.red, 50)</code>)。</li>\n        <li><b>linewidth</b>: 线宽 (1-4)。</li>\n        <li><b>style</b>: 绘图样式。\n            <ul>\n                <li><code>plot.style_line</code> (默认): 连续线。</li>\n                <li><code>plot.style_stepline</code>: 阶梯线。</li>\n                <li><code>plot.style_histogram</code>: 直方图 (柱状图)。</li>\n                <li><code>plot.style_columns</code>: 柱状图 (类似成交量)。</li>\n                <li><code>plot.style_circles</code>: 圆点。</li>\n                <li><code>plot.style_area</code>: 面积图。</li>\n            </ul>\n        </li>\n        <li><b>offset</b>: 向左/右平移 K 线根数 (正数向右，负数向左)。</li>\n    </ul>\n</div>\n<table style=\"width:100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;\">\n    <tr style=\"background: rgba(255,255,255,0.05);\">\n        <th style=\"padding:8px; border-bottom:1px solid #333; text-align:left;\">场景</th>\n        <th style=\"padding:8px; border-bottom:1px solid #333; text-align:left;\">代码示例</th>\n    </tr>\n    <tr>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\">标准均线</td>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\"><code style=\"color:var(--accent-primary);\">plot(ta.sma(close, 20), title=\"MA 20\", color=color.yellow, linewidth=2)</code></td>\n    </tr>\n    <tr>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\">直方图 (MACD)</td>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\"><code style=\"color:var(--accent-primary);\">plot(hist, style=plot.style_histogram, color=hist>=0 ? color.red : color.green)</code></td>\n    </tr>\n    <tr>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\">未来偏移 (一目云)</td>\n        <td style=\"padding:8px; border-bottom:1px solid #333;\"><code style=\"color:var(--accent-primary);\">plot(close, offset=26, color=color.blue) // 向右平移26根</code></td>\n    </tr>\n</table>\n\n<h4>2. plotshape() - 形状标记</h4>\n<p>用于标记买卖信号、高低点等离散事件。</p>\n<div class=\"detail-box\">\n    <h4>关键参数详解</h4>\n    <ul>\n        <li><b>style</b>: 形状类型。\n            <code>shape.triangleup</code>, <code>shape.triangledown</code>, <code>shape.labelup</code>, <code>shape.labeldown</code>, <code>shape.circle</code>, <code>shape.xcross</code> 等。\n        </li>\n        <li><b>location</b>: 垂直位置。\n            <code>location.abovebar</code> (K线上方), <code>location.belowbar</code> (下方), <code>location.top</code> (窗口顶部), <code>location.bottom</code>, <code>location.absolute</code> (指定价格)。\n        </li>\n        <li><b>size</b>: 大小。<code>size.auto</code>, <code>size.tiny</code>, <code>size.small</code>, <code>size.normal</code>, <code>size.large</code>, <code>size.huge</code>。</li>\n        <li><b>text</b>: 形状旁边的短文本。</li>\n        <li><b>textcolor</b>: 文本颜色。</li>\n    </ul>\n</div>\n<p><b>示例：</b></p>\n<pre><code class=\"language-javascript\">\n// 在金叉处，K 线下方标记绿色向上三角形，并写 \"Buy\"\nplotshape(ta.crossover(ma1, ma2), style=shape.triangleup, location=location.belowbar, color=color.green, size=size.small, text=\"Buy\", textcolor=color.white)\n</code></pre>\n\n<h4>3. plotchar() - 字符标记</h4>\n<p>比 plotshape 更轻量，或用于调试。</p>\n<ul>\n    <li><b>char</b>: 任意单字符 (如 \"★\", \"$\", \"B\")。</li>\n</ul>\n<p><b>示例：</b></p>\n<pre><code class=\"language-javascript\">\n// 在创新高时标记 \"★\"\nplotchar(high > ta.highest(high[1], 20), char=\"★\", location=location.abovebar, color=color.yellow)\n</code></pre>\n\n<h4>4. bgcolor() & fill() - 背景与填充</h4>\n<div class=\"detail-box\">\n    <h4>参数详解</h4>\n    <ul>\n        <li><b>bgcolor(color, offset)</b>: 填充整个 K 线的背景条。通常配合条件表达式使用。</li>\n        <li><b>fill(plot1, plot2, color)</b>: 必须接收两个 <code>plot()</code> 函数的 ID。</li>\n    </ul>\n</div>\n<p><b>示例：</b></p>\n<pre><code class=\"language-javascript\">\n// 1. 背景色：RSI 超买时显示红色背景 (透明度 90%)\nbgcolor(rsi > 70 ? color.new(color.red, 90) : na)\n\n// 2. 填充：布林带\nu = plot(upper)\nl = plot(lower)\nfill(u, l, color=color.new(color.blue, 95))\n</code></pre>\n\n<h4>5. 动态对象 (Objects) - 高级绘图</h4>\n<p>需要在特定坐标 (x, y) 绘图时使用。x 轴通常是 <code>bar_index</code> (K线索引) 或 <code>time</code> (时间戳)。</p>\n<table style=\"width:100%; border-collapse: collapse; font-size: 13px;\">\n    <tr>\n        <th style=\"text-align:left; border-bottom:1px solid #555; padding: 5px;\">类型</th>\n        <th style=\"text-align:left; border-bottom:1px solid #555; padding: 5px;\">函数与参数</th>\n        <th style=\"text-align:left; border-bottom:1px solid #555; padding: 5px;\">示例</th>\n    </tr>\n    <tr>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><b>Line</b></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>line.new(x1, y1, x2, y2, color, width, style)</code></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>line.new(bar_index[10], high[10], bar_index, high, width=2)</code></td>\n    </tr>\n    <tr>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><b>Label</b></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>label.new(x, y, text, style, color, textcolor)</code></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>label.new(bar_index, high, \"Resist\", style=label.style_label_down)</code></td>\n    </tr>\n    <tr>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><b>Box</b></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>box.new(left, top, right, bottom, border_color, bgcolor)</code></td>\n        <td style=\"padding:5px; border-bottom:1px solid #333;\"><code>box.new(bar_index[5], high, bar_index, low, bgcolor=color.new(color.blue, 80))</code></td>\n    </tr>\n</table>\n<h3>进阶补充：绘图性能与调试</h3>\n<h4>1. 绘图类型选择</h4>\n<ul>\n  <li><code>plot()</code>: 绘制连续曲线（最常用）。</li>\n  <li><code>plotshape()</code>: 在 K 线上下方绘制图标（如箭头、星号），适合标记买卖点。</li>\n  <li><code>plotchar()</code>: 绘制任意 ASCII 字符，也常用于调试（因为它可以打印数值，虽然是在图表上）。</li>\n  <li><code>plotarrow()</code>: 绘制向上/向下的长箭头，通常用于表示差值大小。</li>\n</ul>\n<h4>2. 动态对象管理（Garbage Collection）</h4>\n<p><code>line.new</code>, <code>label.new</code>, <code>box.new</code> 创建的对象不仅消耗内存，还有数量限制（默认约 50 个）。</p>\n<ul>\n  <li><b>自动删除：</b> 当对象数量超过限制时，最旧的对象会被自动删除（垃圾回收）。</li>\n  <li><b>手动管理：</b> 使用 <code>line.delete(id)</code> 手动清理不再需要的对象。</li>\n  <li><b>最佳实践：</b> 如果只是为了显示最新状态，不要在每根 K 线都 new 一个 label，而是用 <code>var</code> 创建一个 label，然后用 <code>label.set_xy</code> 和 <code>label.set_text</code> 更新它。</li>\n</ul>\n<pre><code>// 高性能写法：只维护一个 Label 显示最新价格\nvar label myLabel = label.new(bar_index, close, text=str.tostring(close))\nlabel.set_xy(myLabel, bar_index, close)\nlabel.set_text(myLabel, str.tostring(close))\n</code></pre>",
      "summary": [
        "plot() 支持 style, linewidth, color, offset 等丰富参数",
        "plotshape() 用于信号标记，支持 text 和 location",
        "color.new(color, transp) 用于设置透明度 (0-100)",
        "动态对象 (line/label) 用于更灵活的几何绘图"
      ],
      "pine_code": "//@version=5\nindicator(\"Detailed Plotting\", overlay=true)\n\n// --- 1. plot() 详细参数演示 ---\n// 基础均线：黄色，线宽2\nma = ta.sma(close, 20)\np1 = plot(ma, title=\"MA Line\", color=color.yellow, linewidth=2, style=plot.style_line)\n\n// 偏移均线：向右平移 5 根，白色虚线 (模拟预测或一目均衡表)\n// 注意：style 参数不仅有 line，还有 stepline, circles, cross 等\nplot(ma, title=\"Offset MA\", color=color.white, linewidth=1, style=plot.style_line, offset=5)\n\n// --- 2. fill() 区域填充 ---\n// 模拟一个下轨\nlower = ma * 0.98\np2 = plot(lower, \"Lower Channel\", display=display.none) // 不显示线条本身\n// 填充 p1 和 p2 之间，使用 90% 透明度的黄色\nfill(p1, p2, color=color.new(color.yellow, 90), title=\"Channel Fill\")\n\n// --- 3. plotshape() 信号标记 ---\n// 场景：RSI 下穿 70 (卖出信号)\nis_sell = ta.crossunder(ta.rsi(close, 14), 70)\n\nplotshape(is_sell, \n     title=\"Sell Signal\", \n     style=shape.labeldown,   // 形状：向下标签\n     location=location.abovebar, // 位置：K线上方\n     color=color.red,         // 形状颜色\n     size=size.normal,        // 大小\n     text=\"SELL\",             // 文本内容\n     textcolor=color.white,   // 文本颜色\n     offset=0                 // 偏移\n)\n\n// --- 4. plotchar() 字符标记 ---\n// 场景：阳线，在下方标记一个小 \"+\"\nplotchar(close > open, \n     title=\"Up Bar\", \n     char=\"+\", \n     location=location.belowbar, \n     color=color.green, \n     size=size.tiny\n)\n\n// --- 5. bgcolor() 背景高亮 ---\n// 场景：RSI 超卖 (<30) 时，背景变红\nis_oversold = ta.rsi(close, 14) < 30\n// 使用 color.new 设置透明度非常重要，否则会遮挡K线\nbgcolor(is_oversold ? color.new(color.red, 80) : na, title=\"Oversold BG\")\n\n// --- 6. 动态对象 (Line & Label) ---\n// 仅在最后一根 K 线绘制，避免历史数据充满垃圾对象\nif barstate.islast\n    // 画一条从 10 根前 high 到当前 high 的线\n    line.new(x1=bar_index - 10, y1=high[10], \n             x2=bar_index, y2=high, \n             color=color.fuchsia, width=2, style=line.style_dashed)\n             \n    // 在当前高点打标签\n    label.new(x=bar_index, y=high, \n              text=\"High: \" + str.tostring(high, \"#.##\"), \n              style=label.style_label_lower_left,\n              color=color.fuchsia, textcolor=color.white)\n",
      "python_code": "# Python (使用 mplfinance 模拟 Pine 绘图参数)\nimport mplfinance as mpf\nimport pandas as pd\n\n# 准备数据 (假设 df 是 DataFrame)\n# ...\n\n# 1. 构造 addplot 列表\napds = []\n\n# plot(ma, color=color.yellow, linewidth=2)\napds.append(mpf.make_addplot(df['MA20'], color='yellow', width=2))\n\n# plotshape(is_sell, type='scatter', marker='v', markersize=100)\n# mplfinance 需要创建一个全是 NaN 的序列，只在信号点有值\nsell_signal_series = df['High'] * 1.01\nsell_signal_series[~df['IsSell']] = float('nan')\napds.append(mpf.make_addplot(sell_signal_series, type='scatter', markersize=100, marker='v', color='red'))\n\n# fill_between (区域填充)\n# 需要在 mpf.plot() 的 fill_between 参数中设置\nfill_config = dict(y1=df['MA20'].values, y2=df['Lower'].values, alpha=0.1, color='yellow')\n\n# 绘图\n# style 参数对应 Pine 的 plot.style (candle, line 等)\nmpf.plot(df, \n         type='candle', \n         style='charles', \n         addplot=apds, \n         fill_between=fill_config,\n         volume=True,\n         title=\"Python Plotting Demo\")\n\n# 关于 Line 和 Label (动态对象)\n# mplfinance 支持 alines (arbitrary lines) 和 tlines (trend lines)\n# mpf.plot(..., alines=dict(alines=[(date1, price1), (date2, price2)], colors=['fuchsia'], linewidths=2))\n",
      "quiz": [
        {
          "q": "想在 K 线图背景上标记颜色，应该用哪个函数？",
          "choices": [
            {
              "text": "plot()",
              "isCorrect": false
            },
            {
              "text": "bgcolor()",
              "isCorrect": true
            },
            {
              "text": "fill()",
              "isCorrect": false
            }
          ],
          "explain": "bgcolor() 用于设置背景颜色。fill() 是用于填充两条 plot 线之间的区域。"
        },
        {
          "q": "plotshape 与 plotchar 的区别？",
          "choices": [
            {
              "text": "plotshape 画几何形状，plotchar 画字符",
              "isCorrect": true
            },
            {
              "text": "没有区别",
              "isCorrect": false
            },
            {
              "text": "plotchar 性能更高",
              "isCorrect": false
            }
          ],
          "explain": "plotshape 预设了 triangle, arrow 等形状；plotchar 可以显示任意字符。"
        },
        {
          "q": "如何设置颜色的透明度？",
          "choices": [
            {
              "text": "color.new(color.red, 50)",
              "isCorrect": true
            },
            {
              "text": "color.red(50)",
              "isCorrect": false
            },
            {
              "text": "rgb(255, 0, 0, 0.5)",
              "isCorrect": false
            }
          ],
          "explain": "v5 中推荐使用 color.new(base_color, transp) 设置透明度，transp 为 0-100。"
        },
        {
          "q": "fill() 函数需要什么参数？",
          "choices": [
            {
              "text": "两个 plot ID",
              "isCorrect": true
            },
            {
              "text": "两个价格",
              "isCorrect": false
            },
            {
              "text": "两个颜色",
              "isCorrect": false
            }
          ],
          "explain": "fill() 接收两个由 plot() 返回的 ID，填充它们之间的区域。"
        },
        {
          "q": "Backtrader 默认使用什么绘图库？",
          "choices": [
            {
              "text": "Matplotlib",
              "isCorrect": true
            },
            {
              "text": "Plotly",
              "isCorrect": false
            },
            {
              "text": "D3.js",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 默认集成 Matplotlib 进行绘图。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l11_inputs",
      "title": "7. 交互输入 (Inputs)",
      "subtitle": "让脚本更灵活",
      "concept": "<h3>交互式输入</h3>\n<p><code>input()</code> 函数允许用户在不修改代码的情况下调整脚本参数。Pine Script v5 提供了类型安全的输入函数。</p>\n<div class=\"detail-box\">\n    <h4>常用输入类型</h4>\n    <ul>\n        <li><code>input.int(defval, title, minval, maxval)</code>: 整数</li>\n        <li><code>input.float(defval, title)</code>: 浮点数</li>\n        <li><code>input.bool(defval, title)</code>:布尔开关</li>\n        <li><code>input.string(defval, title, options=[...])</code>: 下拉菜单</li>\n        <li><code>input.color(defval, title)</code>: 颜色选择器</li>\n        <li><code>input.source(close, title)</code>: 数据源选择 (如 open, hl2)</li>\n        <li><code>input.symbol(syminfo.tickerid, title)</code>: 标的选择</li>\n        <li><code>input.timeframe(\"D\", title)</code>: 时间周期选择</li>\n    </ul>\n    <h4>组织参数</h4>\n    <p>使用 <code>group</code>, <code>inline</code>, <code>tooltip</code> 参数可以美化设置面板。</p>\n</div>\n<h3>进阶补充：构建专业级配置面板</h3>\n<h4>1. 组织参数（Group & Inline）</h4>\n<p>让你的脚本设置界面更整洁：</p>\n<ul>\n  <li><code>group</code>: 将参数分组，显示标题。</li>\n  <li><code>inline</code>: 将多个参数放在同一行显示（inline 字符串相同的参数会在一行）。</li>\n</ul>\n<pre><code>i_len = input.int(14, \"Length\", group=\"Strategy\", inline=\"p1\")\ni_src = input.source(close, \"Source\", group=\"Strategy\", inline=\"p1\")\n</code></pre>\n<h4>2. 交互式输入</h4>\n<ul>\n  <li><code>input.time</code>: 选择特定的日期时间（常用于回测范围过滤）。</li>\n  <li><code>input.symbol</code>: 允许用户选择另一个交易对进行对比分析。</li>\n</ul>\n<h4>3. 确认机制</h4>\n<p><code>confirm=true</code> 参数（在 <code>input.*</code> 中）会在脚本加载前弹窗让用户确认参数。这在处理复杂计算或重型脚本时很有用。</p>",
      "summary": [
        "input.* 系列函数用于创建设置选项",
        "options 参数可以创建下拉列表",
        "group 参数可以将选项分组显示",
        "source 输入允许用户选择计算基于收盘价还是开盘价等",
        "input 的值是“用户配置”，代码里不要试图动态修改它",
        "复杂脚本建议用 group/inline/tooltip 让设置更易用"
      ],
      "pine_code": "//@version=5\nindicator(\"Inputs Demo\", overlay=true)\n\n// --- 基础输入 ---\nlen = input.int(14, \"Length\", minval=1, tooltip=\"均线周期\")\nsrc = input.source(close, \"Source\")\nis_show = input.bool(true, \"Show Plot\")\n\n// --- 分组与下拉菜单 ---\ngrp_style = \"Style Settings\"\ncol = input.color(color.red, \"Line Color\", group=grp_style)\ntype = input.string(\"SMA\", \"MA Type\", options=[\"SMA\", \"EMA\"], group=grp_style)\n\n// --- 逻辑使用 ---\nfloat ma_val = na\nif type == \"SMA\"\n    ma_val := ta.sma(src, len)\nelse\n    ma_val := ta.ema(src, len)\n\nplot(is_show ? ma_val : na, color=col, linewidth=2)",
      "python_code": "# Python (Streamlit 示例)\nimport streamlit as st\nimport pandas_ta as ta\n\n# 对应 input.int\nlength = st.number_input(\"Length\", min_value=1, value=14)\n# 对应 input.string options\nma_type = st.selectbox(\"MA Type\", [\"SMA\", \"EMA\"])\n# 对应 input.bool\nis_show = st.checkbox(\"Show Plot\", value=True)\n\nif ma_type == \"SMA\":\n    ma = ta.sma(df['close'], length)\nelse:\n    ma = ta.ema(df['close'], length)",
      "quiz": [
        {
          "q": "如何创建一个带有下拉菜单的输入项？",
          "choices": [
            {
              "text": "input.string(..., options=['A', 'B'])",
              "isCorrect": true
            },
            {
              "text": "input.list(...)",
              "isCorrect": false
            },
            {
              "text": "input.menu(...)",
              "isCorrect": false
            }
          ],
          "explain": "使用 input.string 并配合 options 参数列表即可生成下拉菜单。"
        },
        {
          "q": "想要限制输入的整数最小值为 1，应该用哪个参数？",
          "choices": [
            {
              "text": "limit=1",
              "isCorrect": false
            },
            {
              "text": "minval=1",
              "isCorrect": true
            },
            {
              "text": "low=1",
              "isCorrect": false
            }
          ],
          "explain": "input.int 和 input.float 支持 minval 和 maxval 参数。"
        },
        {
          "q": "input.source 默认通常允许用户选择什么？",
          "choices": [
            {
              "text": "开盘价、收盘价、最高价等序列",
              "isCorrect": true
            },
            {
              "text": "本地文件",
              "isCorrect": false
            }
          ],
          "explain": "input.source 允许用户在 UI 上选择计算指标基于哪个价格序列（如 close, hl2 等）。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l12_debugging",
      "title": "8. 调试技巧 (Debugging)",
      "subtitle": "Pine Logs 与 绘图调试",
      "concept": "<h3>调试方法</h3>\n<p>编写复杂脚本时，知道变量当前的值至关重要。Pine Script v5 提供了两种主要的调试方式。</p>\n\n<h4>1. 可视化调试 (Visual Debugging)</h4>\n<p>最传统的方法是将变量画在图上：</p>\n<ul>\n    <li><code>plot(variable)</code>: 画在副图观察数值变化。</li>\n    <li><code>plotchar(bar_index, \"Bar Index\", \"\", location.top)</code>: 在数据窗口显示数值。</li>\n    <li><code>label.new(...)</code>: 在特定 K 线上打印文本。</li>\n</ul>\n\n<h4>2. Pine Logs (日志调试) - 推荐</h4>\n<p>v5 引入了 <code>log.*</code> 函数，可以在专门的 \"Pine Logs\" 面板中查看输出，不会干扰图表。</p>\n<ul>\n    <li><code>log.info(message)</code>: 打印一般信息。</li>\n    <li><code>log.error(message)</code>: 打印错误（红色）。</li>\n    <li><code>log.warning(message)</code>: 打印警告（橙色）。</li>\n</ul>\n<p><b>提示:</b> 字符串拼接可以使用 <code>str.tostring(value)</code> 或 <code>str.format()</code>。</p>\n<h3>更高效的排错流程（从现象到根因）</h3>\n<ul>\n  <li><b>先画状态再画数值:</b> 先用 <code>plotchar()</code> 标出条件，再定位变量。</li>\n  <li><b>缩小范围:</b> 把复杂策略拆成几段条件，逐段验证，避免一次看太多线索。</li>\n  <li><b>锁定重绘问题:</b> 多周期/未来偏移相关逻辑，优先检查是否使用了未确认数据。</li>\n</ul>\n<h3>边界与注意</h3>\n<ul>\n  <li><b>日志数量:</b> 过多 log 会影响可读性，建议只在关键分支或最后一根输出。</li>\n  <li><b>对象上限:</b> label/line/box 有数量限制，实战里要复用或删除旧对象。</li>\n</ul>\n<h3>进阶补充：Pine Script 调试艺术</h3>\n<h4>1. Pine Logs (v5 新神器)</h4>\n<p>以前我们只能用 <code>plotchar</code> 把数值印在图上，不仅乱而且难以查看历史。现在可以使用 <b>Pine Logs</b>：</p>\n<pre><code>if barstate.islast\n    log.info(\"Current Price: {0}, RSI: {1}\", close, myRsi)\n</code></pre>\n<p>在编辑器底部的 \"Pine Logs\" 面板中查看输出，支持时间戳过滤。</p>\n<h4>2. 可视化调试</h4>\n<ul>\n  <li><b>背景色：</b> 用 <code>bgcolor()</code> 根据条件改变背景色，快速定位逻辑触发点。</li>\n  <li><b>画线：</b> 用 <code>hline()</code> 或 <code>plot()</code> 把中间变量画出来，看是否符合预期。</li>\n  <li><b>表格：</b> 用 <code>table.new</code> 在图表角落显示一个Dashboard，实时监控多个变量的值。</li>\n</ul>",
      "summary": [
        "log.info() 是最现代的调试工具",
        "plotchar 可以把数值显示在 Data Window 而不干扰图表",
        "str.tostring(val) 用于将数字转为字符串",
        "大量 label/line 会触发对象数量上限，调试对象建议只在最后一根创建",
        "日志不要每根都刷屏，必要时加条件或只在 islast 输出",
        "把边界条件写进逻辑里：na、对象上限、确认时机"
      ],
      "pine_code": "//@version=5\nindicator(\"Debugging Demo\", overlay=true)\n\n// 场景：调试一个交叉条件\nfast = ta.sma(close, 10)\nslow = ta.sma(close, 20)\ncross = ta.crossover(fast, slow)\n\n// 方法 1: 绘图调试\nplot(fast, \"Fast\", color.green)\nplotchar(cross, \"Cross happened?\", \"X\", location.top) // 会在发生处显示 X\n\n// 方法 2: 日志调试\nif cross\n    // 只有发生交叉时才打印\n    // str.format 类似 Python 的 f-string 或 .format\n    msg = str.format(\"Gold Cross at bar {0}. Price: {1}\", bar_index, close)\n    log.info(msg)\nelse if barstate.islast\n    log.info(\"Current Close: \" + str.tostring(close))",
      "python_code": "# Python\nimport logging\n\n# 配置日志\nlogging.basicConfig(level=logging.INFO)\n\nif crossover:\n    # f-string 调试\n    logging.info(f\"Gold Cross at index {i}. Price: {close}\")\n    print(f\"DEBUG: Fast={fast_val}, Slow={slow_val}\")",
      "quiz": [
        {
          "q": "在 Pine Script 中如何将数字转换为字符串以进行日志打印？",
          "choices": [
            {
              "text": "str(123)",
              "isCorrect": false
            },
            {
              "text": "str.tostring(123)",
              "isCorrect": true
            },
            {
              "text": "string(123)",
              "isCorrect": false
            }
          ],
          "explain": "Pine 使用 str.tostring() 进行类型转换。"
        },
        {
          "q": "log.error() 的输出通常显示在哪里？",
          "choices": [
            {
              "text": "图表上",
              "isCorrect": false
            },
            {
              "text": "Pine Editor 下方的 Pine Logs 面板",
              "isCorrect": true
            },
            {
              "text": "浏览器控制台",
              "isCorrect": false
            }
          ],
          "explain": "需要在编辑器下方切换到 'Pine Logs' 标签页查看。"
        },
        {
          "q": "plotchar 的作用是？",
          "choices": [
            {
              "text": "绘制字符标记，且其值会显示在数据窗口",
              "isCorrect": true
            },
            {
              "text": "画线",
              "isCorrect": false
            }
          ],
          "explain": "plotchar 不仅能在图上打标，其 title 和 value 也会出现在 Data Window 中，适合调试布尔值或状态。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l5_functions",
      "title": "9. 自定义函数",
      "subtitle": "单行与多行函数",
      "concept": "<h3>为什么要写函数？</h3>\n<p>函数的价值是把“可复用的计算步骤”封装起来：让策略逻辑更短、更清晰，也更容易做参数化与复用。</p>\n<div class=\"detail-box\">\n  <h4>1) 基本语法</h4>\n  <ul>\n    <li><b>单行函数:</b> <code>f(x) => x * 2</code></li>\n    <li><b>多行函数:</b> 函数体需要缩进，最后一行表达式会自动作为返回值。</li>\n  </ul>\n</div>\n<h3>2) 类型与输入 / 输出（写得“像工程”）</h3>\n<ul>\n  <li><b>输入:</b> 传入一个或多个 series（src、length、阈值等）。建议显式写参数类型（float/int/bool），减少隐式转换错误。</li>\n  <li><b>输出:</b> 返回 series（供 plot/信号判断）或返回元组（Tuple）用于多返回值。</li>\n</ul>\n<h3>3) 多返回值（Tuple）</h3>\n<p>当你想一次返回多条序列时，用元组最清晰：<code>[a, b] = f()</code>。</p>\n<h3>边界与性能注意事项</h3>\n<ul>\n  <li><b>不要写递归:</b> Pine 不支持递归（也不适合逐 bar 递归）。</li>\n  <li><b>避免在函数里手写大循环:</b> 每根 K 线都会调用函数，循环放大后很容易变慢。</li>\n  <li><b>绘图/交易指令的作用域:</b> 绘图与下单更建议保持在主逻辑层，函数专注于“计算并返回结果”。</li>\n</ul>\n<h3>实战建议（函数是把复杂度关进盒子里）</h3>\n<ul>\n  <li><b>把重复逻辑封装:</b> 信号判定、风控距离、显示文本格式化等。</li>\n  <li><b>返回值尽量单一:</b> 需要多个结果时用元组返回，并在调用处拆包。</li>\n  <li><b>明确输入/输出:</b> 输入用参数传递，减少隐式依赖，降低调试成本。</li>\n</ul>\n<h3>边界条件</h3>\n<ul>\n  <li><b>na 传播:</b> 函数内部可能返回 <code>na</code>，调用者要负责兜底处理。</li>\n  <li><b>性能:</b> 在函数里创建大量对象（label/line）会很慢，尽量只在必要时创建。</li>\n</ul>\n<h3>进阶补充：函数式编程思维</h3>\n<h4>1. 多返回值 (Tuple)</h4>\n<p>Pine Script 函数支持一次返回多个值，这在计算复杂指标（如 MACD 返回快线、慢线、柱体）时非常有用。</p>\n<pre><code>calc_macd(src, fast, slow) =>\n    fast_ma = ta.ema(src, fast)\n    slow_ma = ta.ema(src, slow)\n    [fast_ma, slow_ma] // 返回元组\n\n[f, s] = calc_macd(close, 12, 26)\n</code></pre>\n<h4>2. 单行函数 vs 多行函数</h4>\n<ul>\n  <li><b>单行:</b> <code>f(x) => x * 2</code> 简洁，适合简单计算。</li>\n  <li><b>多行:</b> 必须缩进，适合复杂逻辑。最后一行表达式的值会自动作为返回值（无需 return 关键字）。</li>\n</ul>\n<h4>3. 作用域陷阱</h4>\n<p>函数内部可以读取外部的全局变量，但<b>不能修改</b>外部的全局变量（除非用 <code>:=</code> 修改且该变量已在外部声明）。最佳实践是尽量保持函数“纯粹”，只依赖参数输入。</p>",
      "summary": [
        "=> 用于定义函数，多行函数依赖缩进",
        "函数自动返回最后一行表达式结果",
        "建议显式参数类型，减少类型不匹配",
        "支持元组多返回值：[a, b] = f()",
        "函数尽量只做计算，避免重循环导致变慢",
        "把边界条件写进逻辑里：na、对象上限、确认时机"
      ],
      "pine_code": "//@version=5\nindicator(\"Functions\")\n\n// 单行函数\nf_avg(x, y) => (x + y) / 2\n\n// 多行函数\nf_custom_ma(src, length) =>\n    sum = 0.0\n    for i = 0 to length - 1\n        sum := sum + src[i]\n    sum / length // 返回值\n\nplot(f_custom_ma(close, 14))",
      "python_code": "# Python\ndef f_avg(x, y):\n    return (x + y) / 2\n\ndef f_custom_ma(series, length):\n    # 向量化操作优于循环\n    return series.rolling(length).mean()",
      "quiz": [
        {
          "q": "Pine Script 中定义函数的符号是什么？",
          "choices": [
            {
              "text": "def",
              "isCorrect": false
            },
            {
              "text": "function",
              "isCorrect": false
            },
            {
              "text": "=>",
              "isCorrect": true
            }
          ],
          "explain": "Pine 使用箭头符号 => 来定义函数。"
        },
        {
          "q": "多行函数的返回值是？",
          "choices": [
            {
              "text": "第一行的结果",
              "isCorrect": false
            },
            {
              "text": "最后一行表达式的结果",
              "isCorrect": true
            },
            {
              "text": "必须使用 return 关键字",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 函数自动返回最后一行表达式的值，不需要显式 return。"
        },
        {
          "q": "函数可以修改外部的全局变量吗？",
          "choices": [
            {
              "text": "可以",
              "isCorrect": false
            },
            {
              "text": "不可以 (除非使用 array 等引用类型)",
              "isCorrect": true
            }
          ],
          "explain": "Pine 函数是纯函数式的，不能直接修改外部的基础类型变量，但可以修改 array/matrix 内容。"
        },
        {
          "q": "如何从函数返回两个值？",
          "choices": [
            {
              "text": "return a, b",
              "isCorrect": false
            },
            {
              "text": "[a, b]",
              "isCorrect": true
            },
            {
              "text": "a and b",
              "isCorrect": false
            }
          ],
          "explain": "Pine 支持元组返回，语法是 [res1, res2] = func()。"
        },
        {
          "q": "Python 中定义函数使用什么关键字？",
          "choices": [
            {
              "text": "func",
              "isCorrect": false
            },
            {
              "text": "def",
              "isCorrect": true
            },
            {
              "text": "function",
              "isCorrect": false
            }
          ],
          "explain": "Python 使用 def 关键字。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l10_arrays",
      "title": "10. 数组 (Arrays)",
      "subtitle": "处理非序列数据的动态集合",
      "concept": "<h3>为什么 Pine 还需要数组？</h3>\n<p>虽然 Pine 的普通变量天然就是时间序列（series），但有些需求并不是“每根 K 线一个值”的形式，例如：维护一个可变长度的列表、做排序/去重、保存若干个关键价位、做队列/栈。此时就需要 <code>array</code>。</p>\n<div class=\"detail-box\">\n  <h4>常用 API（最常用的一组）</h4>\n  <ul>\n    <li><code>array.new_float(size)</code>: 创建数组（强类型：float/int/bool/string）。</li>\n    <li><code>array.push(id, value)</code>: 末尾追加。</li>\n    <li><code>array.pop(id)</code>: 弹出末尾元素。</li>\n    <li><code>array.get(id, index)</code> / <code>array.set(id, index, value)</code>: 读写指定位置。</li>\n    <li><code>array.size(id)</code>: 当前长度。</li>\n  </ul>\n</div>\n<h3>输入 / 输出与边界条件</h3>\n<ul>\n  <li><b>输入:</b> 你想保存的离散数据（价格、bar_index、信号发生点等）。</li>\n  <li><b>输出:</b> 从数组取出来的值（通常用于画线/打标或进一步计算）。</li>\n  <li><b>边界:</b> 数组索引从 0 开始；越界访问会报错，务必先检查 <code>array.size()</code>。</li>\n  <li><b>性能:</b> 数组通常用 <code>var</code> 初始化一次；在实时 bar 内频繁 push 可能导致性能下降。</li>\n</ul>\n<h3>进阶补充：数组的高级应用</h3>\n<h4>1. 动态数组 vs 历史序列</h4>\n<p>这是新手最大的困惑：<code>close</code> 是历史序列，自动维护历史；<code>array</code> 是你手动维护的容器。你可以在一根 K 线上往 array 里塞入 100 个 tick 的价格，这是 series 做不到的。</p>\n<h4>2. 队列与栈 (Queue & Stack)</h4>\n<p>数组常被用来实现 FIFO（先进先出）队列，例如计算最近 10 次金叉的平均间隔：</p>\n<pre><code>// 维护一个固定长度的数组\nif condition\n    array.push(myArray, bar_index)\n    if array.size(myArray) > 10\n        array.shift(myArray) // 移除最早的一个\n</code></pre>\n<h4>3. 性能警告</h4>\n<p>不要在每根 K 线上都 <code>array.new_float(0)</code>！这会创建数万个对象。一定要用 <code>var a = array.new_float(0)</code>，然后用 <code>array.clear(a)</code> 在需要时清空它。</p>",
      "summary": [
        "数组用于保存“非时间序列”的动态集合",
        "数组索引从 0 开始，越界会报错",
        "必须用 array.get/set 读写，不能用 []",
        "[] 专用于时间序列历史引用",
        "数组一般用 var 初始化，避免每根 K 线重建"
      ],
      "pine_code": "//@version=5\nindicator(\"Arrays\")\n\n// 仅在第一根 K 线初始化\nvar a = array.new_float(0)\n\nif close > open\n    array.push(a, close)\n\n// 获取最后一个存入的值\nlast_val = array.size(a) > 0 ? array.get(a, array.size(a) - 1) : na\nplot(last_val)",
      "python_code": "# Python (Standard List)\nmy_list = []\n\n# 在循环中\nif close > open:\n    my_list.append(close)\n\nlast_val = my_list[-1] if len(my_list) > 0 else None",
      "quiz": [
        {
          "q": "在 Pine Script 中如何读取数组 a 的第一个元素？",
          "choices": [
            {
              "text": "a[0]",
              "isCorrect": false
            },
            {
              "text": "array.get(a, 0)",
              "isCorrect": true
            },
            {
              "text": "a.first()",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 的数组必须通过 array.get() 函数访问，[] 操作符被保留用于历史数据引用。"
        },
        {
          "q": "如何向数组末尾添加元素？",
          "choices": [
            {
              "text": "array.add()",
              "isCorrect": false
            },
            {
              "text": "array.push()",
              "isCorrect": true
            },
            {
              "text": "array.append()",
              "isCorrect": false
            }
          ],
          "explain": "使用 array.push(id, value)。"
        },
        {
          "q": "array.new_float(0) 的含义是？",
          "choices": [
            {
              "text": "创建一个包含 0 的数组",
              "isCorrect": false
            },
            {
              "text": "创建一个初始大小为 0 的浮点数数组",
              "isCorrect": true
            }
          ],
          "explain": "参数是初始大小。"
        },
        {
          "q": "Pine 数组与 Python List 的主要区别？",
          "choices": [
            {
              "text": "Pine 数组不能存储不同类型的数据",
              "isCorrect": true
            },
            {
              "text": "Python List 不能动态扩容",
              "isCorrect": false
            }
          ],
          "explain": "Pine 数组是强类型的 (int array, float array)，Python List 可以混合类型。"
        },
        {
          "q": "数组通常配合什么关键字初始化？",
          "choices": [
            {
              "text": "var",
              "isCorrect": true
            },
            {
              "text": "const",
              "isCorrect": false
            }
          ],
          "explain": "通常使用 var 关键字，确保数组只被创建一次，而不是每根 K 线都重新创建。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l13_maps",
      "title": "11. 映射 (Maps)",
      "subtitle": "Key-Value 键值对集合",
      "concept": "<h3>什么是 Map?</h3>\n<p>Pine Script v5 引入了 <code>map</code> 类型，允许存储 <b>Key-Value (键-值)</b> 对。这在需要关联数据时非常有用（例如：统计每个价格出现的次数，或者存储不同 Symbol 的配置）。</p>\n<div class=\"detail-box\">\n    <h4>核心操作</h4>\n    <ul>\n        <li><code>m = map.new<key_type, val_type>()</code>: 创建新 Map。</li>\n        <li><code>map.put(m, key, value)</code>: 存入或更新数据。</li>\n        <li><code>map.get(m, key)</code>: 读取数据。</li>\n        <li><code>map.contains(m, key)</code>: 检查键是否存在。</li>\n        <li><code>map.remove(m, key)</code>: 删除键。</li>\n    </ul>\n</div>\n<p><b>注意:</b> Map 是引用类型，修改 Map 会影响所有引用它的变量。</p>\n<h3>典型用法（把 Map 当成轻量字典）</h3>\n<ul>\n  <li><b>参数表:</b> 用键名（如品种/周期）映射到参数组，避免一堆 if/else。</li>\n  <li><b>状态缓存:</b> 记录事件最后一次发生的 bar_index 或价格，便于后续计算。</li>\n</ul>\n<h3>边界与注意</h3>\n<ul>\n  <li><b>键不存在:</b> 取值前先 <code>map.contains()</code> 或设置默认值，避免逻辑断裂。</li>\n  <li><b>类型一致:</b> Map 的 key/value 类型要一致，建议用命名约束语义。</li>\n</ul>\n<h3>进阶补充：数据结构详解</h3>\n<h4>1. 引用类型（Reference Types）</h4>\n<p>Array 和 Map 是<b>引用类型</b>。当你把一个数组赋值给另一个变量时，你只是复制了“指针”。修改新变量也会影响原数组。</p>\n<pre><code>a = array.from(1, 2)\nb = a\narray.push(b, 3)\n// 此时 a 也会变成 [1, 2, 3]\n</code></pre>\n<h4>2. 性能考量</h4>\n<ul>\n  <li><b>Map vs Array:</b> Map 的查找速度通常比遍历 Array 快，但创建开销大。</li>\n  <li><b>持久化：</b> 务必使用 <code>var</code> 关键字声明 Array/Map，否则每根 K 线都会重新创建空对象，极其消耗性能且逻辑通常是错的。</li>\n</ul>\n<pre><code>// 正确做法\nvar a = array.new_float(0)\narray.push(a, close)\n</code></pre>\n<h4>3. 常用操作</h4>\n<ul>\n  <li><code>array.sort()</code>: 排序。</li>\n  <li><code>array.avg()</code> / <code>array.stdev()</code>: 对数组内容进行统计计算。</li>\n  <li><code>map.put(key, value)</code> / <code>map.get(key)</code>: 键值对存取。</li>\n</ul>",
      "summary": [
        "Map 用于存储键值对",
        "必须指定 Key 和 Value 的类型",
        "比 Array 查找速度更快（哈希表）",
        "map.get 取不到 key 会返回 na，最好先 contains 或用 nz 兜底",
        "Map 通常用 var 初始化一次，避免频繁重建",
        "把边界条件写进逻辑里：na、对象上限、确认时机"
      ],
      "pine_code": "//@version=5\nindicator(\"Map Demo\")\n\n// 创建一个 Map: Key是价格(float), Value是次数(int)\n// 用于统计价格分布 (Market Profile 简易版)\nvar price_map = map.new<float, int>()\n\n// 将价格取整到最近的 10 美元\nlevel = math.round(close / 10) * 10\n\n// 更新计数\nif barstate.isnew // 实时bar只计算一次\n    int count = 0\n    if map.contains(price_map, level)\n        count := map.get(price_map, level)\n    \n    map.put(price_map, level, count + 1)\n\n// 在最后一根K线打印统计结果\nif barstate.islast\n    keys = map.keys(price_map)\n    size = array.size(keys)\n    if size > 0\n        log.info(\"Total price levels tracked: \" + str.tostring(size))\n        // 获取某个价格的出现次数\n        demo_level = array.get(keys, 0)\n        log.info(\"Level \" + str.tostring(demo_level) + \" count: \" + str.tostring(map.get(price_map, demo_level)))",
      "python_code": "# Python (Dictionary)\nprice_map = {}\n\nlevel = round(close / 10) * 10\n\nif level in price_map:\n    price_map[level] += 1\nelse:\n    price_map[level] = 1\n\nprint(f\"Level {level} count: {price_map[level]}\")",
      "quiz": [
        {
          "q": "Python 的 Dictionary (字典) 对应 Pine Script 的什么结构？",
          "choices": [
            {
              "text": "Array",
              "isCorrect": false
            },
            {
              "text": "Map",
              "isCorrect": true
            },
            {
              "text": "Matrix",
              "isCorrect": false
            }
          ],
          "explain": "Map 和 Dictionary 都是基于键值对 (Key-Value) 的哈希结构。"
        },
        {
          "q": "如何向 map m 中存入键值对 'A': 1？",
          "choices": [
            {
              "text": "m['A'] = 1",
              "isCorrect": false
            },
            {
              "text": "map.put(m, 'A', 1)",
              "isCorrect": true
            },
            {
              "text": "map.add(m, 'A', 1)",
              "isCorrect": false
            }
          ],
          "explain": "Pine Script 使用 map.put() 方法。"
        },
        {
          "q": "如果 map.get(m, key) 中的 key 不存在，会返回什么？",
          "choices": [
            {
              "text": "0",
              "isCorrect": false
            },
            {
              "text": "na (空值)",
              "isCorrect": true
            },
            {
              "text": "报错停止运行",
              "isCorrect": false
            }
          ],
          "explain": "返回 na，所以通常需要配合 map.contains() 或 nz() 使用。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "l14_libraries",
      "title": "12. 库 (Libraries)",
      "subtitle": "代码模块化与复用",
      "concept": "<h3>库的作用：把“计算逻辑”变成可复用模块</h3>\n<p>当脚本越来越长，或者你想在多个指标/策略里复用同一套计算（例如自定义均线、风控工具、信号过滤器），就应该把它提炼成 <b>Library</b>。库的核心定位是：<b>只做计算，返回结果</b>。</p>\n<div class=\"detail-box\">\n  <h4>输入 / 输出</h4>\n  <ul>\n    <li><b>输入:</b> 传入 series（src、high/low/close 等）与参数（length、factor）。</li>\n    <li><b>输出:</b> 返回计算后的 series 或元组（供外部脚本 plot 或用于下单判断）。</li>\n  </ul>\n</div>\n<h4>1) 创建库</h4>\n<p>脚本开头声明 <code>library(\"LibName\")</code>，并使用 <code>export</code> 导出可被外部调用的函数（建议显式写参数类型）。</p>\n<pre><code>//@version=5\nlibrary(\"MyTools\", overlay=true)\n\nexport my_sma(float src, int len) =>\n    ta.sma(src, len)</code></pre>\n<h4>2) 使用库</h4>\n<p>在其他脚本中用 <code>import</code> 导入（格式：用户名/库名/版本），再通过别名调用导出函数。</p>\n<pre><code>//@version=5\nindicator(\"Test Lib\")\nimport username/MyTools/1 as mt\n\nplot(mt.my_sma(close, 14))</code></pre>\n<h3>边界与注意事项</h3>\n<ul>\n  <li><b>库里不要写绘图/下单:</b> 库更适合做“纯计算”，把 plot/strategy 放在调用方脚本里。</li>\n  <li><b>版本管理:</b> 发布库后用版本号升级，避免改动导致旧脚本行为变化。</li>\n  <li><b>安全:</b> 不要在库里硬编码任何敏感信息（即使是“私有脚本”，也可能被复制）。</li>\n</ul>\n<h3>进阶补充：库的发布与管理</h3>\n<h4>1. export 关键字</h4>\n<p>只有加上 <code>export</code> 关键字的函数才能被外部脚本调用。未导出的函数只能在库内部使用（私有函数）。</p>\n<pre><code>// @version=5\nlibrary(\"MyLib\")\n\nexport myFunc(int x) => x * 2\n</code></pre>\n<h4>2. 类型系统限制</h4>\n<p>库函数的参数和返回值必须有明确的类型签名。你不能写一个参数类型模糊的库函数，这要求你对 Pine 的类型系统（series float vs simple int）有更深的理解。</p>\n<h4>3. 引用库</h4>\n<p>使用 <code>import Username/LibName/Version as alias</code> 导入。TradingView 社区有大量现成的标准库（如 `Ta-Lib` 实现）可供直接调用。</p>",
      "summary": [
        "使用 library() 声明库脚本",
        "使用 export 关键字导出函数",
        "使用 import 导入库，格式为 用户名/库名/版本",
        "库函数不能绘图 (plot)，只能返回计算结果",
        "库适合沉淀信号/风控/工具函数，调用方负责展示与交易"
      ],
      "pine_code": "// --- 文件 1: 库 (MyMath) ---\n//@version=5\n// 库脚本不能直接画图\nlibrary(\"MyMath\", overlay = true)\n\n// 导出一个计算复利增长的函数\n// 必须明确指定参数类型\nexport compound_interest(float principal, float rate, int periods) =>\n    principal * math.pow(1 + rate, periods)\n\n// --- 文件 2: 指标 (使用库) ---\n//@version=5\nindicator(\"Lib Usage\")\n// 假设这是你发布的库，版本为 1\n// import YourName/MyMath/1 as mm\n\n// res = mm.compound_interest(1000, 0.05, 10)\n// plot(res)",
      "python_code": "# Python (Modules)\n# file: my_math.py\ndef compound_interest(principal, rate, periods):\n    return principal * (1 + rate) ** periods\n\n# file: main.py\nimport my_math as mm\n\nres = mm.compound_interest(1000, 0.05, 10)\nprint(res)",
      "quiz": [
        {
          "q": "库脚本以什么声明开头？",
          "choices": [
            {
              "text": "indicator()",
              "isCorrect": false
            },
            {
              "text": "library()",
              "isCorrect": true
            },
            {
              "text": "strategy()",
              "isCorrect": false
            }
          ],
          "explain": "库必须使用 library() 声明。"
        },
        {
          "q": "库中的函数如果想被外部调用，必须加什么关键字？",
          "choices": [
            {
              "text": "public",
              "isCorrect": false
            },
            {
              "text": "export",
              "isCorrect": true
            },
            {
              "text": "global",
              "isCorrect": false
            }
          ],
          "explain": "使用 export 导出函数，未导出的函数仅为库内部私有。"
        },
        {
          "q": "库函数可以直接 plot() 画图吗？",
          "choices": [
            {
              "text": "可以",
              "isCorrect": false
            },
            {
              "text": "不可以",
              "isCorrect": true
            }
          ],
          "explain": "库主要用于计算逻辑复用，不能直接包含 plot, strategy.entry 等绘图或交易指令。"
        }
      ],
      "category": "基础语法 (Basics)"
    },
    {
      "id": "ind_macd",
      "title": "指标 1: MACD (异同移动平均线)",
      "subtitle": "趋势跟踪与动量指标之王",
      "concept": "ENC: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",
      "summary": [
        "ta.macd(source, fast, slow, signal) 返回 DIF/DEA/Hist",
        "交叉=基础信号，零轴=环境过滤，背离=进阶提示",
        "fast/slow 控制灵敏度，signal 控制平滑程度",
        "实盘优先用收盘确认，避免盘中假穿越",
        "常用 ADX/ATR 做过滤与风控联动",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLIyQkK08hQFlVAAULR05lNAlZW1w8AAAAS08cDV9WWRwlBwsCQ08MUUtMPAAAADpPUkRMWRYdCA0BTwwDC0tdFFBYXElHXVlIGAERehkCChNHAgVbXHQZBwtJRwwACFdKBRMGAgoVQQ0ITV0RehkCChNHHA1fVlkcJQcLAkNPB1dUVwJUDQoLAB1KV0pZHg4LTG0fAwtMEFAZGhopDgEKSBhLTAkFC1gXAwAQFktMCQULOg8GHBBXX0oRBEc=",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTyIle3xrBBsPEQIIFkxaTBYjHRwEEwoIHRECMlBJTkUDCglEZ2dRHgAaOjhHHAFUXhFKY05FR09PRBgYSxUFCEsKDgwAGAUYEh1ADAkLBgdZTFcCGkAoJiwrTEtdVBZHCgQTDkNEMhgYUElORUdPT0QYGBhQSU5FR09PRBgYGFBJTkVHT09EGBgYUElORRcKHQ1XXGcdDF9YVl1DRDIYGFBJTkVHT09EGBgYUElORUdPT0QYGBhQSU5FR09PRBgYGFBJTkUXCh0NV1xnHQxcWFVZQ0QyGBhQSU5FR09PRBgYGFBJTkVHT09EGBgYUElORUdPT0QYGBhQSU5FFwodDVdcZwMACQsGA1JdETIYUElOAQIJTwpdQExYGgsJAUZVbhgYGFBJTkVHTE8XXVReXgQPBgNBAgVbXBhYLScjTmVPRBgYGFBJTkZHHAoIXhZVEQoKSxQGCApZVBhYLSskTmVPRBgYGFBJThUGHBw=",
      "quiz": [
        {
          "q": "MACD 的快线通常是哪两条均线的差？",
          "choices": [
            {
              "text": "EMA12 - EMA26",
              "isCorrect": true
            },
            {
              "text": "SMA12 - SMA26",
              "isCorrect": false
            },
            {
              "text": "EMA5 - EMA10",
              "isCorrect": false
            }
          ],
          "explain": "标准 MACD 使用 12 和 26 周期的 EMA。"
        },
        {
          "q": "ta.macd 函数返回几个值？",
          "choices": [
            {
              "text": "1个",
              "isCorrect": false
            },
            {
              "text": "3个 (MACD线, 信号线, 柱状图)",
              "isCorrect": true
            }
          ],
          "explain": "返回元组 [macdLine, signalLine, histLine]。"
        },
        {
          "q": "Backtrader 的 MACD 指标包含柱状图吗？",
          "choices": [
            {
              "text": "包含 (macd.histo)",
              "isCorrect": true
            },
            {
              "text": "不包含",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 的 MACD 指标对象包含 macd, signal, histo 三条线。"
        },
        {
          "q": "当 MACD 柱状图由负转正，意味着？",
          "choices": [
            {
              "text": "DIF 上穿 DEA (金叉)",
              "isCorrect": true
            },
            {
              "text": "DIF 下穿 DEA (死叉)",
              "isCorrect": false
            }
          ],
          "explain": "柱状图 = DIF - DEA，由负转正说明 DIF 变得大于 DEA。"
        },
        {
          "q": "MACD 属于哪类指标？",
          "choices": [
            {
              "text": "震荡指标",
              "isCorrect": true
            },
            {
              "text": "成交量指标",
              "isCorrect": false
            }
          ],
          "explain": "MACD 兼具趋势跟踪和震荡特性，通常归类为震荡指标。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_rsi",
      "title": "指标 2: RSI (相对强弱指数)",
      "subtitle": "超买超卖的经典判断",
      "concept": "ENC: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",
      "summary": [
        "ta.rsi(source, length) 内部用 ta.rma 平滑",
        "中轴法更适合趋势；阈值法更直观但易钝化",
        "背离是概率提示，需要环境过滤与结构确认",
        "length 越短越敏感，越长越稳但更滞后",
        "常配合 MA/ADX 过滤与 ATR 做风控",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLPDYuTyocWVVIHAxMTG0dT1kYTFleGx0MTwwDC0tdFFBYWkxtHwMLTBBKWWMGCQ4BCkwPCBRQCgEJCB1SB1dUVwJHHAADRmUMVFFWFUFdVUtPDAtUV0pNCgEJCB1BA0pdXR5A",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTz03cWtMAggaAAAWRwZMFmsEGw8RAggWTQIyGFBJTgECCU87Z1FWGR0xOk8cCgheEQJ6SU5FR09PRBhLXRwPQBcUBk9ZGFpMXgAAAQ4MDhBXSkteOz0sTxwKCF4WXBEdD0lHHwoWUVdcTVhaTG1PT0QYGBhQSWRFR09PAF1eGB4MFhFPHAoIXhECeklORUdPT0QYUV5QGgsJAUEdF1FjCC1JUEVQX1VuGBgYUElORUdPT0QYGxg/HwsXBQAaA1BMMlBJTkVHT09EGBgYUBkPFhQ=",
      "quiz": [
        {
          "q": "RSI 的标准周期通常是多少？",
          "choices": [
            {
              "text": "14",
              "isCorrect": true
            },
            {
              "text": "5",
              "isCorrect": false
            },
            {
              "text": "20",
              "isCorrect": false
            }
          ],
          "explain": "Wilder 提出的标准 RSI 周期为 14。"
        },
        {
          "q": "RSI 大于 70 通常被认为是什么信号？",
          "choices": [
            {
              "text": "超买",
              "isCorrect": true
            },
            {
              "text": "超卖",
              "isCorrect": false
            }
          ],
          "explain": "超过 70 视为市场过热（超买），低于 30 视为过冷（超卖）。"
        },
        {
          "q": "ta.rsi 的返回值范围是？",
          "choices": [
            {
              "text": "0 到 100",
              "isCorrect": true
            },
            {
              "text": "-100 到 100",
              "isCorrect": false
            },
            {
              "text": "无限制",
              "isCorrect": false
            }
          ],
          "explain": "RSI 是归一化指标，永远在 0-100 之间。"
        },
        {
          "q": "Backtrader 的 RSI 默认使用什么类型的移动平均？",
          "choices": [
            {
              "text": "Wilder's MA (SMMA)",
              "isCorrect": true
            },
            {
              "text": "SMA",
              "isCorrect": false
            }
          ],
          "explain": "标准 RSI 计算使用 Wilder 平滑，Backtrader 遵循此标准。"
        },
        {
          "q": "RSI 背离是指？",
          "choices": [
            {
              "text": "价格创新高但 RSI 未创新高",
              "isCorrect": true
            },
            {
              "text": "价格和 RSI 同时创新高",
              "isCorrect": false
            }
          ],
          "explain": "顶背离（看跌）：价格新高，RSI 未新高；底背离（看涨）：价格新低，RSI 未新低。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_bb",
      "title": "指标 3: Bollinger Bands (布林带)",
      "subtitle": "波动率通道与均值回归",
      "concept": "ENC:TAFdW4HP14GHu97w9IbSyFNADAsGMkwZUIDf7In6r92A1o/k74Xv84Glv93w1Yzl+or96Nq4pJbazIDtx4jqv9q47Yz+6YH42YOsg93swYv+2YvX7teEopTRw43ax4n8l92l94zu2YjT44CAstzI4obYz4n3y92lv5Xp0kWl3k8qGN24/Y/O4oLo6YGPltvw64vL5Ijz+96Vm5fz6oHc2IrkhN2k2I3U64jT9VhaBt/kwYvdwYrB2d23oJXl+I3A7YrLp96L0ozkzYDh6IOivN7k34nZzovX6t6xkZXVzllIDVGHuLoEXxlQb1sLBhIYW1QRGh1YRQsKEFlRVF0LAR1FUWVEGBgYTAFaW1ZGT4ODvN74+Yrd6YrqyN2Et0xGBlFZZU9EGBgEAFdSB1kiBgBcVF1KVUEHWU9TB1dcXU46IyRPHAoWUV1LXEkCAAkIGwwRBBcTBgoAWVNAFAYyGFBJTlkXUVMGBm1IAAwcX1tADVoYBFsfDQtbKgYLAFRdGFtJAxALG09OGGtMFAwYTRQKHQ1dSxRQBQsLABsHTQQXWx8NC1tbQB9aMhgYUElSFVlTDVp0V08VG1RZSA1RRARbVxQMUCgOCwsIXRgVUAQbCRNPRURrTFwVH0YWAh0GAUsUGBwMAAITB0ZYF1tXFAxQWUgfUW4YGBhQVR5bWwwAAF0GTBFHDAdPHAoWUV1LXEkCAAkIGwwUGFUFBRpMW0AMC1xdBlCB0fGC9PFEBFtXFAxQPgoGCwBUXRRQHB4VAh1DRFRXTxUbM1lIDAAAXQYEXxlQb1tACw1OBjJMAVpbVUZPgICc39fki8vriurM3IC1lfnigv3ri96c3qDjgcnjj8j9i4Sw3fjCiNLQiPvM14SxTEYGUVllUxFUBjJQSU5FWwMGWgRaBpX06YDn04r/pt2F4oHJ44/I/V4EF1pOSYjv7YvX7tyAs5jUxoDa/IvZpNq47Izv6oDJ1IyHv93Kz4zl+oj14NCGgZf84orb44fDnt23+o3W7o/Sx0vcgLKY1MaA9+GKy4Pesc6M9fuC0v2AgJXQzcGJ/+OJ897chKKT6eyM5+2K9LDRpPeB48SA4cCBmrvb8OtSSgsGUW4YGBhQVQIMWVMNWtCOs5Xj0Y3Q8Ib+t9Cf9oHJ911TQAYGGN7644zl+4jF5d+YjJTR5I3ax0CAgLPQzcGM5fqK0vfchaSW2syA7ceI6r/esdmM0sWD1+GMjrPd+taL9ciK5czch5mV5tmG5+2G5LrdqPiB2O6C5dCDtpfd0uqN5eVTQAhRBjJMRhsJWWVTDAwGC1lJi93BisHZ27i5VStOgd/hTzdJTV0VEwuK2+eH26PRoMaN0+OC0eeBlqbf5MGB2e5TQAwMBjJMHAJbbU9PRBgEVBlXUgdZitfC3ZaFUCsPCwMYBgBMUAJMRgxbR1MMC1xdBlg8HhUCHU9JGHRXBwwcTEdATylRXFwcDFJKBAALAQbXhPyBz8SO6OCCi5rd+sGJ6+CK097dhImT6exZSAMGWjIYGFBJUgkOUVMGBh16SlVBB1lPUwdXXF1OQT4XDgwKRBUYdB8eCxdOT0BEEG1IAAwcRUpPIwtPXUpZVUEGCAsKWteEtJnu4YDr+Yvfj96YzIzyzY7v9Y25q9H35Yn/44j03N2XgZTU44LawYzkugQXHABQb0dPT0QEVFFOVQxbNB4aAV1CXUpVQQdZT4rcnt2WzYD72oH42Y2vjN7u6IrY6YDT6N2GuJXX7oPj4Ir1i9+l8Ivu+YDIwIyrvNDz1Ifi6I3v+deEtJnz4YD34Yrrl9C7zY7m44Lg/oyZtN7z7IHZ/IvS4t6ugZX5/4z774fCudGa7YzK84DOwYyWnNvw61JKCwZRbgQXTRxXZFkPW1FQERjd/+uI8NeJ7+rcgbCY2e1ZSAdbWjIETRxXZEVHT09YVFEGTAtQCQIBCBBQAgRfC1BFj9nlgZyf0Mbji9zUidT114S0mN/kgNfgh9Ky3q3/j+r6hO/tgq+d3fbsi+rIiu7r3Yi3n9Xig/DKiN6H3bn/jMrCgfTbg5CL2/DrUkoLBlFuGBgYUFUCDFlTDVpVTVQEU1JKBVFPjI6y3dTOhtPtje/43ZaFkunzitvjh8Oe0IXYj/XRgt/+gIW+3uvdi+rIhvLE14SjmN/kgNfgif+M2rjsjsThhe/yi4S03M/Ii+rQifTQ3ZyilNTog/zbisqB3qDjjO/igMXug5iM2/DrUkoLBlFuBBdNHFdkWQ9bUVERGN3I0YbC5ory9QQXUERXZFkSA1FuGBgYUFUCDFlTDVrcgLKY1MaB3+KJ/JfdnNmO6tOO99SBsqPXzOWK3eyH0szcgLWW8cGAw8aI4I7erN+P/PRdU0AGBhjdzNOG0+yK5dvRv7SX0uGA39eJ1ofQhdiB0fWPzuOLhLDczcmJ+eyK59TforyS6fKN0eqL3YgX0Mbsi+jxje/53beXmOrTgOjFifyX0I77jOTagtHngYSC18zgjeXlU0AIUQYyUElORVsDBloEWgaV7OaAyfWI6pfdmvOM6OiCwfWDla7f5cxUWUgNUUTfrJBQKCo9SIry49+Ch5b/8oLp6IrsnN6u3Y/2yo/Z5IGyh9DP8Yj9yIbz49C1mZ/V4oDh4obksd6z2Y7E5IDP24Kwrt3r94vY9Ybv39CGqZPp7FlIAwZaMgQXBQVQb1sHXFrQhquV7MtFSE+H2qvdv8qG0u2B5eWCtL/e0O6L2PSJ5/Tdv4WW/N6D+sqI8JDXhPlVQQ1UUWVYTVQGeklOWQsGUVhaBtDO+ovgwlVTS1oGGAMMHAwCHIzkuVRdHg4aDYTv7glNVEyT6exZSAMGWgRUUU5VDFuP0fyBv4ICTEYMW0cCBgBcVF1fHB4VAh1ACFdPXQJJit3uifLF0biimej9gt3QgNi03IPVjOHvj87ig6yn3+rti93BisHZ27i5VSuN5eVTQAhRBjJMRhsJWWVTDAsG3fXah/HJiuDm3q2IlNHgjdnWiPG03qXRjdXTW0AHVwYyBAUFUG9HT1MIUQYEElcCAAkIGwwCBBcSV06A4dyKyqLdpfeM7tmA9euBgYvey/iJzeyK1cLbuLpMRgIMWVMDDQYEWk4EGwkTVVNLWgYYle/dgMn1huSi0bnjjMDYgtXJi4S00Mbji8HAh9nu35CLlNTojcDJiuup3qPEjN70hO/tWBdUUU5jTkVbAwZaBFoGlefogOjdi9y10I7DU1JKBVFPgbG10PvMi9zVic/d3ISildf5gO/fT1hbV1wVVwAEW0AMC1xdBp/V4oHYzorrj9G4y4HQ9I/J7oKght3M5ovB44j/4teEsJTX5YDB7U9YW1dcFVcAChNPAQUQQBFMRg0KAwpRi4Sx2/DrUkoLBlFuGBgEHABQWQVRiMWW0JbUj/nTgfPVXgQXWk5Jit/DiuDtF9+S8Y7O0YDe1ICHmd3/3ove3YfByt6sjpfy9oLGwYfKnNeE/IDv2oLq4oOjoNzIxIj4wor0+t+Rh5jf5Ibn7VNLVFEGelVBEAtRZVhQCwaV8vCD0uRPSxjdlu6O9f2B3MeCvLfXzOGH5NiK6unfpLOY3NmD+sqK2rDfhv6G0uxbQAdXBjIEBQVQb0dPUwhRBgQSV4vg74jhy92au5X54IHYzorrjwIEXwtQRY7z6Iy1mReY3+WA7dCI6pfdmvON1uiC/+OLhLTd4OWK3eeL187etL+WyemC/euHy4Pei+WMwOmC6seAgLXd4OWN5eVTQAhRBjJQSVIJDlFTBgbRuc+M6+iP0OiCs6fd4OFUWUgNUUTdt7qW/N6B3+KHwrndt9qM8s2D1++Clo3d/u+L6tWL1+7QiLuV4d6D+e6H44zXhPyB6daC3/6BuaLd+O+Iy9KL1+reg6KV48aMzeOHy7nbuPJVQQkOUWVEGARUGVdSB1mGzOrRoZGU1faA4udVWBdaBlCP4uKBz+iMjKfQxMqI896K//UX37LGj+7kiNPjgpWa3v32iMjFiPTs3YKsl+LCgszkh8qG0JbRhtLtJjs9S9+Dq5b36oHa4kCCr47R592IyMWJ4vvXhLGT6exZSAMGWjIEFwUFUG8=",
      "summary": [
        "ta.bb(series, length, mult) 返回中/上/下轨",
        "均值回归与突破跟随是两套不同逻辑",
        "带宽描述波动率，Squeeze 常是变盘前兆",
        "mult 越大越稳但信号更少，越小越敏感",
        "强趋势会沿轨运行，先判断环境再交易",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLLAoLAwYKX11KUCsPCwMcTU0yY1UZDQoJAkNPEUhIXQJFTgkIGAoWZRgFUB0PSwUNRwdUV0sVRU5XV0NPVhEySBwGGk0SHx8BShQYEwYCChVSDAtUV0peGwsBTmUfCFdMEBwGGQAVQ08HV1RXAlQNCgsAHUpfSl0VB0dvFwMAEBBVURQNAgBLTwwLVFdKTQoBCQgdQQNKWUFZ",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTy0ma0xKER0LAh5HDRAWa0wCCBoAABZGXjIYGFBJCgABTzA7UVZRBDYxTRQKAwIRAjJQSU5FR09PREtdVBZHDAdHUk8GTBZRHg0HBgYbABZLFnofBQIMCQgKFnpZVhQaRhYCAwlKXFlMEUVOFQIdBgtcBQpARU4BAhkJBVtMVwJUXEtXRmVEGBgYUElORW1PT0QYXF0WSQAAHxtHF11UXllTZEVHT09EGBgYU0kdAAsJQQZaFlQZBwsWSRsAFDIYGFBJTkVHT0xES11UFkcMB0kDBgpdSxYSBhpvR09PRBgYGFBKThYCAwlKWloWHAAAABRBAg1cMhhQSU5FR09PFFlLSw==",
      "quiz": [
        {
          "q": "布林带的中轨通常是什么？",
          "choices": [
            {
              "text": "20日 SMA",
              "isCorrect": true
            },
            {
              "text": "20日 EMA",
              "isCorrect": false
            },
            {
              "text": "VWAP",
              "isCorrect": false
            }
          ],
          "explain": "标准布林带中轨是简单移动平均线。"
        },
        {
          "q": "布林带上下轨的标准差倍数默认是？",
          "choices": [
            {
              "text": "2",
              "isCorrect": true
            },
            {
              "text": "1",
              "isCorrect": false
            },
            {
              "text": "3",
              "isCorrect": false
            }
          ],
          "explain": "默认使用 2 倍标准差，理论上包含约 95% 的价格数据。"
        },
        {
          "q": "ta.bb 函数返回几个值？",
          "choices": [
            {
              "text": "3个 (中, 上, 下)",
              "isCorrect": true
            },
            {
              "text": "2个 (上, 下)",
              "isCorrect": false
            }
          ],
          "explain": "返回 [middle, upper, lower]。"
        },
        {
          "q": "布林带收口 (Squeeze) 意味着什么？",
          "choices": [
            {
              "text": "波动率降低，即将变盘",
              "isCorrect": true
            },
            {
              "text": "趋势结束",
              "isCorrect": false
            }
          ],
          "explain": "带宽收窄表示市场进入低波动整理期，通常随后会出现剧烈突破。"
        },
        {
          "q": "Backtrader 的 BollingerBands 指标包含几条线？",
          "choices": [
            {
              "text": "3条 (top, bot, mid)",
              "isCorrect": true
            },
            {
              "text": "2条",
              "isCorrect": false
            }
          ],
          "explain": "包含 top, bot, mid 三条线。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_atr",
      "title": "指标 4: ATR (平均真实波幅)",
      "subtitle": "衡量市场波动率的尺子",
      "concept": "ENC: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",
      "summary": [
        "ta.atr(length) 衡量波动率，不判断方向",
        "TR 把跳空缺口纳入计算",
        "常用 k*ATR 做止损距离与仓位归一化",
        "跨品种可用 ATR% = ATR/close 做对比",
        "length 越短越贴近但易被噪音打出",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLLzE1TUZuTllUUFROEQZBDhBKEAlEQGQVCwAbTE5ZVFxJDQoLAB1ZW1dUHxtAFRIdHwhdEQ==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTy4wamtMAggaAAAWRwZMFmsEGw8RAggWTQIyGFBJTgECCU87Z1FWGR0xOk8cCgheEQJ6SU5FR09PRBhLXRwPQAQTHU9ZGFpMXgAAAQ4MDhBXSkteKDo3TxwKCF4WXBEdD0lHHwoWUVdcTVhaTG1PT0QYGBhQSWRFR09PAF1eGB4MFhFPHAoIXhECeklORUdPT0QYGxiV48aD5+6JyZrete+B2fiAydRuGBgYUElORUccGwtIZ1wZGhpFWk8cAVReFhEdHD5XMk9OGAo=",
      "quiz": [
        {
          "q": "ATR 衡量的是什么？",
          "choices": [
            {
              "text": "趋势方向",
              "isCorrect": false
            },
            {
              "text": "波动率 (Volatility)",
              "isCorrect": true
            },
            {
              "text": "成交量",
              "isCorrect": false
            }
          ],
          "explain": "ATR 专门用于衡量价格波动的剧烈程度，与方向无关。"
        },
        {
          "q": "真实波幅 (TR) 考虑了什么？",
          "choices": [
            {
              "text": "跳空缺口 (Gap)",
              "isCorrect": true
            },
            {
              "text": "只考虑当日高低差",
              "isCorrect": false
            }
          ],
          "explain": "TR = Max(High-Low, Abs(High-PrevClose), Abs(Low-PrevClose))，考虑了跳空情况。"
        },
        {
          "q": "海龟交易法中使用 N 值，N 值本质上是？",
          "choices": [
            {
              "text": "ATR",
              "isCorrect": true
            },
            {
              "text": "RSI",
              "isCorrect": false
            }
          ],
          "explain": "海龟法则中的 N 就是 ATR。"
        },
        {
          "q": "ta.atr(14) 实际上是对 TR 做了什么运算？",
          "choices": [
            {
              "text": "RMA (Wilder's MA)",
              "isCorrect": true
            },
            {
              "text": "SMA",
              "isCorrect": false
            }
          ],
          "explain": "标准 ATR 使用 RMA (Running Moving Average) 平滑。"
        },
        {
          "q": "如果 ATR 上升，意味着？",
          "choices": [
            {
              "text": "K 线变长，波动加剧",
              "isCorrect": true
            },
            {
              "text": "价格上涨",
              "isCorrect": false
            }
          ],
          "explain": "ATR 上升说明近期价格变动幅度增大。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_kdj",
      "title": "指标 5: Stochastic (KD/KDJ)",
      "subtitle": "随机震荡指标",
      "concept": "ENC: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",
      "summary": [
        "ta.stoch(close, high, low, length) 可视作 %K",
        "想要 %D 需对 K 再平滑一次",
        "J=3K-2D 更敏感，可能超出 0~100",
        "交叉+区间过滤更稳，趋势市注意钝化",
        "length 越短越灵敏但假信号更多",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLPREIDAcFS0xRE0tHbwxPUkRMWRYDHQEGD0cMCFdLXVxJBgwAB0NEVFdPXElfUU5lC0QFGEwRRx0IBkcESBgLEXoZAgoTRwRIGFtXHAYcWAQAAwtKFlocHAtMbR8DC0wQXFxJDQoLAB1ZW1dUHxtAChUOAQNdEQ==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTzwQV1tQIx0cBBMKCB0QWkxeOhoXBhsKA0ERAnpJTkVHCwoCGGdnGQcHETgwRxddVF5ZU2RFR09PRBgYGAMMAgNJHBsLW1AYTUkMEUkGAQBRW1kEBhwWSTwbC1tQWQMdBwZPHAoIXhZcER0PSUcfChZRV1xNWFpJRx8KFlFXXC8NCAQUG1JXFBhIFRsHCgMwCxdUV09NWkdvR09PRBgYGFBjTkVHTwsBXhhWFREaTRQKAwIRAjJQSU5FR09PRBsYSxUFCEsUGwAHUBZIFRsNLm1PT0QYGBhQSU1FFAoDAhZLTB8KBksXCh0HfDIYUElORUdPTxRZS0s=",
      "quiz": [
        {
          "q": "ta.stoch 计算的是哪条线？",
          "choices": [
            {
              "text": "%K",
              "isCorrect": true
            },
            {
              "text": "%D",
              "isCorrect": false
            }
          ],
          "explain": "ta.stoch 返回的是未平滑的 %K 值，通常需要再做一次 SMA 得到 %D。"
        },
        {
          "q": "KD 指标在超买区死叉通常意味着？",
          "choices": [
            {
              "text": "卖出信号",
              "isCorrect": true
            },
            {
              "text": "买入信号",
              "isCorrect": false
            }
          ],
          "explain": "高位死叉是看跌信号。"
        },
        {
          "q": "KDJ 中的 J 线公式是？",
          "choices": [
            {
              "text": "3K - 2D",
              "isCorrect": true
            },
            {
              "text": "K + D",
              "isCorrect": false
            }
          ],
          "explain": "J 线波动最剧烈，公式为 3*K - 2*D。"
        },
        {
          "q": "Backtrader 的 Stochastic 包含 J 线吗？",
          "choices": [
            {
              "text": "默认不包含",
              "isCorrect": true
            },
            {
              "text": "包含",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 标准 Stochastic 只有 percK 和 percD。"
        },
        {
          "q": "随机指标的核心思想是？",
          "choices": [
            {
              "text": "上涨趋势中收盘价倾向于接近最高价",
              "isCorrect": true
            },
            {
              "text": "成交量决定价格",
              "isCorrect": false
            }
          ],
          "explain": "Stochastic 基于收盘价在近期高低点范围内的相对位置。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_supertrend",
      "title": "指标 6: Supertrend (超级趋势)",
      "subtitle": "基于 ATR 的趋势跟随指标",
      "concept": "ENC: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",
      "summary": [
        "ta.supertrend(factor, period) 返回值与方向",
        "factor/period 决定灵敏度与回撤大小",
        "震荡市易来回反转，建议先做趋势过滤",
        "基于 ATR，适合与 ATR 风控联动",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLPRAXCh0QSl1WFEtHbzwcGhRdSkwCDAABS08LDUpdWwQAAQs6T1JETFkWAxweABUbHQFWXBBDRU5UV0ZlFFRXTFgaGxUCHRsWXVZcXEkNCgsAHUQFGFwZGwsGEwYAChgEGEBJUUUEAAMLShZfAgwLC0dVTwdXVFcCRxwAA0Y=",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoYewUaGgoKRmVHGNGk8I7S84Lp9oy/kt3e84rc7k8mClxRWxEdARdHiN7fGBDQ1+iLy+uJ+tDcg5uXye+A3fxGbhsY3tDRi9rkhu/f0Iapn9X0b0RPDQVLUVsvHB4VAh1PWRgQUBkOBkVMTwMLTxEYX0lcRUxPAhFUTFEABQcAFU9FRFlMSnpKTgwBTwwIV0tdUFdOAw4BDghnTUgADBxfRxsdAVZcGE1JGxU=",
      "quiz": [
        {
          "q": "ta.supertrend 返回值的第二个参数 direction 为负时代表？",
          "choices": [
            {
              "text": "看涨 (Uptrend)",
              "isCorrect": true
            },
            {
              "text": "看跌 (Downtrend)",
              "isCorrect": false
            }
          ],
          "explain": "在 Pine v5 中，direction < 0 (通常为 -1) 代表看涨趋势。"
        },
        {
          "q": "Supertrend 的计算依赖哪个指标？",
          "choices": [
            {
              "text": "ATR",
              "isCorrect": true
            },
            {
              "text": "RSI",
              "isCorrect": false
            }
          ],
          "explain": "Supertrend 使用 ATR 来确定轨道的宽度。"
        },
        {
          "q": "Supertrend 适合什么市场环境？",
          "choices": [
            {
              "text": "趋势明显的市场",
              "isCorrect": true
            },
            {
              "text": "横盘震荡市场",
              "isCorrect": false
            }
          ],
          "explain": "趋势指标在震荡市中会频繁发出错误信号。"
        },
        {
          "q": "Backtrader 自带 Supertrend 指标吗？",
          "choices": [
            {
              "text": "不自带，需自定义",
              "isCorrect": true
            },
            {
              "text": "自带",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 核心库不含 Supertrend，需要继承 bt.Indicator 编写。"
        },
        {
          "q": "Factor 参数通常设置为多少？",
          "choices": [
            {
              "text": "3",
              "isCorrect": true
            },
            {
              "text": "10",
              "isCorrect": false
            }
          ],
          "explain": "默认常用设置是 Factor=3, Period=10。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_vwap",
      "title": "指标 7: VWAP (成交量加权平均价)",
      "subtitle": "机构交易者的基准",
      "concept": "ENC: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",
      "summary": [
        "VWAP=成交量加权平均价，常被当作“公平价”",
        "ta.vwap(source) 会按会话处理重置",
        "日内更有效，缺少成交量则不可用/无意义",
        "可扩展为 VWAP Bands 或 Anchored VWAP",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLODImP01NMkhUHx1GEQZBGRNZSBATBQEWAkZG",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoYewUaGgoKRmUHVFlLA0k4MiY/RwZMFnEeDQcGBhsAFhECMlBJTkUDCglEVl1ABEEdAAsJRl4yGBhQSU5FR08GAhhLXRwPQAEGGw5KXFlMFR0HCAJBCwVMXRBAQE5EWk8cAVReFhQIGgRJCw4QXUxRHQxAAQYbCkwVCRFKY05FR09PRBgYGFBJThYCAwlKW01VLx8BCUdST1QyGBhQSU5FR09PRBgYSxUFCEsEGgI7SE4YTUleb0dPT0QYGBhQSk6C08CK7pjQltGOwPJJQUE=",
      "quiz": [
        {
          "q": "VWAP 通常在什么时候重置？",
          "choices": [
            {
              "text": "每天开盘",
              "isCorrect": true
            },
            {
              "text": "永不重置",
              "isCorrect": false
            }
          ],
          "explain": "标准 VWAP 是 Session VWAP，每日重置。"
        },
        {
          "q": "机构算法交易常用 VWAP 做什么？",
          "choices": [
            {
              "text": "作为执行价格的基准 (Benchmark)",
              "isCorrect": true
            },
            {
              "text": "预测明天价格",
              "isCorrect": false
            }
          ],
          "explain": "机构致力于以优于 VWAP 的价格成交。"
        },
        {
          "q": "ta.vwap(source) 在 Pine 中可以用于日线图吗？",
          "choices": [
            {
              "text": "不可以 (显示为一条线或无意义)",
              "isCorrect": true
            },
            {
              "text": "可以",
              "isCorrect": false
            }
          ],
          "explain": "标准 VWAP 是日内指标，在日线图上每根 Bar 就是一整天，无法体现日内 VWAP 变化，或者变成 Annual VWAP。"
        },
        {
          "q": "计算 VWAP 必须要有哪个数据？",
          "choices": [
            {
              "text": "Volume (成交量)",
              "isCorrect": true
            },
            {
              "text": "Open Interest",
              "isCorrect": false
            }
          ],
          "explain": "没有成交量无法计算加权平均。"
        },
        {
          "q": "Midas VWAP 是什么？",
          "choices": [
            {
              "text": "从特定时间点开始计算的 VWAP",
              "isCorrect": true
            },
            {
              "text": "基于黄金分割的 VWAP",
              "isCorrect": false
            }
          ],
          "explain": "Midas VWAP 允许用户指定起始点（如通过鼠标点击或特定事件）。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_ichimoku",
      "title": "指标 8: Ichimoku (一目均衡表)",
      "subtitle": "云图系统",
      "concept": "ENC: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",
      "summary": [
        "一目=趋势+结构+位移的综合系统",
        "读图先看云：云上偏多，云下偏空，云内震荡",
        "Tenkan/Kijun 交叉要结合云位置判断强弱",
        "先行位移是绘图位移，不等于未来函数",
        "参数 9/26/52 先用经典值，避免过拟合",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLJwYPBgILU00aWWMaAAkEDgoYBRgdCBoNSQ4ZAxBMWV4FARICHBtMAREUUB0PSw8GCAxdS0xYUEdMbQQGDk1WGE1JAwQTB0EFTl8QBAhACQgYChdMEApGQEJFEw5BDFFfUBUaGk1VWUZNMktIEQcvRVpPAgVMUBYRHwlNEwoBD1lWFFACBw8SAUZuS0hZHitOWEcCDhBQFlkGDkYRBkEDC09dSwRBW1dOQ08QWRZQGQ4GABQbR1EKERF6GQIKE0cbAVZTWR5FTgYIAwAWBVtXHAYcSwUDGgERMkgcBhpNDAYFEVYUGBMGAgoVUgwLVFdKXhsLAU4=",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkKBgxHUk8GTBZRHg0HBgYbABZLFnETAQcICAQaTEtdVBZHCgQTDkZuGxhREwEHSwtBGwFWU1keNh0ACWVMRFFbUBlHAksMBgURVmdLFQdkRkcGDAxRFlReGgsLDAAaO0tIWR42Dw==",
      "quiz": [
        {
          "q": "一目均衡表的基准线 (Kijun-sen) 计算公式是？",
          "choices": [
            {
              "text": "(过去26日最高 + 最低) / 2",
              "isCorrect": true
            },
            {
              "text": "26日 SMA",
              "isCorrect": false
            }
          ],
          "explain": "一目云使用 (High+Low)/2 的中点算法，而非收盘价均值。"
        },
        {
          "q": "“云”是由哪两条线组成的？",
          "choices": [
            {
              "text": "先行带 A 和 先行带 B",
              "isCorrect": true
            },
            {
              "text": "转折线 和 基准线",
              "isCorrect": false
            }
          ],
          "explain": "Senkou Span A 和 Senkou Span B 围成了云。"
        },
        {
          "q": "迟行带 (Chikou Span) 是什么？",
          "choices": [
            {
              "text": "当前收盘价向后平移 26 周期",
              "isCorrect": true
            },
            {
              "text": "当前收盘价向前平移",
              "isCorrect": false
            }
          ],
          "explain": "迟行带是当前价格在时间轴上后移，用于和历史价格对比。"
        },
        {
          "q": "价格在云层上方意味着？",
          "choices": [
            {
              "text": "上升趋势",
              "isCorrect": true
            },
            {
              "text": "下降趋势",
              "isCorrect": false
            }
          ],
          "explain": "云层起到支撑作用。"
        },
        {
          "q": "Backtrader 内置 Ichimoku 指标吗？",
          "choices": [
            {
              "text": "内置",
              "isCorrect": true
            },
            {
              "text": "不内置",
              "isCorrect": false
            }
          ],
          "explain": "bt.indicators.Ichimoku 是内置指标。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_cci",
      "title": "指标 9: CCI (顺势指标)",
      "subtitle": "商品通道指标",
      "concept": "ENC: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",
      "summary": [
        "ta.cci(source, length) 用 MAD 归一化偏离",
        "阈值 -100/+100 便于识别异常强弱",
        "可做动量突破，也可做均值回归",
        "强趋势里极端值会持续，逆势要谨慎",
        "常与 ADX/ATR 组合做过滤与风控",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLLSYuTUZuSFRXBEEaBEkMDA0QW1QfGgtJR11fTRE=",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMKB0VaTw0QFlFWFAANBBMAHRcWe3s5QR0ACwlBAFlMWVxJHgAVBgAABQoIWQ==",
      "quiz": [
        {
          "q": "CCI 设计之初是为了分析什么市场？",
          "choices": [
            {
              "text": "商品期货 (Commodities)",
              "isCorrect": true
            },
            {
              "text": "股票",
              "isCorrect": false
            }
          ],
          "explain": "名字 Commodity Channel Index 说明了起源。"
        },
        {
          "q": "CCI 的常数系数通常是？",
          "choices": [
            {
              "text": "0.015",
              "isCorrect": true
            },
            {
              "text": "0.05",
              "isCorrect": false
            }
          ],
          "explain": "Lambert 选用了 0.015 使得约 70-80% 的数据落在 -100 到 +100 之间。"
        },
        {
          "q": "CCI 上穿 +100 可以视为？",
          "choices": [
            {
              "text": "强势突破或超买",
              "isCorrect": true
            },
            {
              "text": "超卖",
              "isCorrect": false
            }
          ],
          "explain": "视策略而定，可以看作动量突破做多，也可以看作超买做空。"
        },
        {
          "q": "CCI 计算中使用的是什么价格？",
          "choices": [
            {
              "text": "典型价格 (High+Low+Close)/3",
              "isCorrect": true
            },
            {
              "text": "收盘价",
              "isCorrect": false
            }
          ],
          "explain": "标准 CCI 使用 Typical Price。"
        },
        {
          "q": "ta.cci(close, 20) 的第二个参数是？",
          "choices": [
            {
              "text": "周期长度",
              "isCorrect": true
            },
            {
              "text": "平滑因子",
              "isCorrect": false
            }
          ],
          "explain": "Length 周期。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ind_adx",
      "title": "指标 10: ADX (平均趋向指标)",
      "subtitle": "判断趋势的强度",
      "concept": "ENC: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",
      "summary": [
        "ADX 衡量趋势强度，不判断方向",
        "方向通常用 DI+ 与 DI- 或价格结构确认",
        "最常见用法：作为趋势/震荡环境过滤器",
        "25/20 是经验阈值，不同品种需校准",
        "ADX 高可能是暴涨也可能是暴跌",
        "把指标当成函数：先想清楚输入与输出，再谈信号",
        "信号尽量收盘确认，并显式处理历史不足的 na"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYwcLAwYMBUxXSlhLLyE/TUZuY1xRAAUbFktPCw1VUVYFGkJFBgsXORgFGAQIQAEKBkdVDBQYQV1HbxcDABAQWVwIRU4GCAMAFgVbVxwGHEsVCgtN",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhENFkVaTw0QFlFWFAANBBMAHRcWeXwoQR0ACwlBAFlMWVxJHgAVBgAABQkMWWNNRQYLF0pZXEBQj/bKgtPVgYKeMlNJitz4ifPtGHx1OUmI6eCJz+PdtL2V+cVFIyZERHxxFQ==",
      "quiz": [
        {
          "q": "ADX 值很高代表什么？",
          "choices": [
            {
              "text": "趋势很强（无论涨跌）",
              "isCorrect": true
            },
            {
              "text": "价格很高",
              "isCorrect": false
            },
            {
              "text": "一定是上涨趋势",
              "isCorrect": false
            }
          ],
          "explain": "ADX 仅衡量强度，不分方向。暴跌时 ADX 也会飙升。"
        },
        {
          "q": "判断趋势方向需要配合什么？",
          "choices": [
            {
              "text": "+DI 和 -DI",
              "isCorrect": true
            },
            {
              "text": "RSI",
              "isCorrect": false
            }
          ],
          "explain": "当 +DI > -DI 为涨势。"
        },
        {
          "q": "ADX 低于 20 通常建议？",
          "choices": [
            {
              "text": "不使用趋势策略，改用震荡策略",
              "isCorrect": true
            },
            {
              "text": "加仓",
              "isCorrect": false
            }
          ],
          "explain": "低 ADX 意味着市场无序震荡。"
        },
        {
          "q": "ta.dmi() 函数返回什么？",
          "choices": [
            {
              "text": "[di+, di-, adx]",
              "isCorrect": true
            },
            {
              "text": "adx",
              "isCorrect": false
            }
          ],
          "explain": "Pine v5 的 dmi 函数一次性返回三个分量。"
        },
        {
          "q": "Backtrader 的 ADX 指标默认周期是？",
          "choices": [
            {
              "text": "14",
              "isCorrect": true
            },
            {
              "text": "10",
              "isCorrect": false
            }
          ],
          "explain": "14 是标准默认值。"
        }
      ],
      "category": "内置指标 (Built-in Indicators)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "l8_strategy_basics",
      "title": "策略 1: 策略回测基础",
      "subtitle": "strategy.entry, strategy.close",
      "concept": "ENC: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",
      "summary": [
        "strategy() 决定资金、手续费、滑点与 pyramiding",
        "entry 管入场/加仓/反手，close 管直接平仓",
        "exit 管止盈止损与移动止损（典型 OCO）",
        "id/from_entry 决定仓位与出场绑定关系",
        "回测务必纳入手续费与滑点",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI6BwgXAwpEa0xKER0LAh5NQ0RXTl0CBQ8cWhsdEV0RMnoED1RTT1JETFkWAwQPTQQDABddFBhBXUdvCg5dXBgFGAQIQBYKDkcHVFdLFUVOV19GZW5RXhgECEAGFQAcF1dOXQJBAwRWW0NEVVkKSEBkRUdPTxdMSlkEDAkcSQoBEEpBEFIlAQsATUNES0xKER0LAh5BAwtWXxF6YwcDRxsOSltKVwMaGwsDCh1MVVkJREVOCAZdV00yGBhQSR0RFQ4bAV9BFhMFARYCR00oV1ZfUkA=",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTyIda0xKER1GBxNBPBBKWUwVDhdMXWVPRBgYXBUPTgsCFxtMS11UFkBUb0dPT0QYGBhQSk6DxO+J+53eoN+M/sOB4+6Ag6syUElORUdPT0RRXhgeBhpFFAoDAhZIVwMAGgwIAVVuGBgYUElORUdPT0QYGxiXxPiC8sqG5IPQhuGG0v+O6P6Bt7HcydmL4MJlT0QYGBhQSU5FR09PDV4YSxUFCEsKDl5QYwhlUFdOFgIDCUpVWQpIMl44Rw4BABhLXRwPQAgGXls/FQllUFVTRRQKAwIWVVlCUTVIVjJVbhgYGFBJTkVHT09EGBgYUEkdAAsJQQZNQRBZY05FR09PRBgYXRwaC19tT09EGBgYUElORUdPTETfla6X/MuM59SH2qnXhOqPw96C4OaBta7d99NkRUdPT0QYGBhQSU5FDglPF11UXl4ED1RTNF85GAQYAwwCA0kCDlYAYwgtSQ8LA08cAVReFh0IX1E8Ql45GAYFUBoLCQFBAgUKAGNdWDNfbU9PRBgYGFBJTkVHT09EGBhLFQUISwQDABddEBE=",
      "quiz": [
        {
          "q": "strategy.entry(\"Long\", strategy.long) 的作用是什么？",
          "choices": [
            {
              "text": "只买入 1 手",
              "isCorrect": false
            },
            {
              "text": "开多单，如果持有空单会先平空再开多",
              "isCorrect": true
            },
            {
              "text": "平掉多单",
              "isCorrect": false
            }
          ],
          "explain": "strategy.entry 会根据方向调整仓位。如果当前持有反向仓位，它会先平反向仓位，再开新方向的仓位（实现反手）。"
        },
        {
          "q": "strategy.close(\"Long\") 会做什么？",
          "choices": [
            {
              "text": "平掉 ID 为 'Long' 的仓位",
              "isCorrect": true
            },
            {
              "text": "开空单",
              "isCorrect": false
            },
            {
              "text": "关闭脚本",
              "isCorrect": false
            }
          ],
          "explain": "close 用于平仓，使仓位归零。"
        },
        {
          "q": "Backtrader 中检查当前是否持仓的属性是？",
          "choices": [
            {
              "text": "self.position",
              "isCorrect": true
            },
            {
              "text": "self.holding",
              "isCorrect": false
            },
            {
              "text": "self.has_order",
              "isCorrect": false
            }
          ],
          "explain": "self.position 返回当前持仓对象，如果不为 None/0 则表示有持仓。"
        },
        {
          "q": "Pine 策略回测参数在哪里设置？",
          "choices": [
            {
              "text": "strategy() 函数的参数中",
              "isCorrect": true
            },
            {
              "text": "indicator() 函数中",
              "isCorrect": false
            },
            {
              "text": "无法设置",
              "isCorrect": false
            }
          ],
          "explain": "可以在 strategy() 中设置 initial_capital, commission_value 等参数。"
        },
        {
          "q": "strategy.long 代表什么方向？",
          "choices": [
            {
              "text": "做多 (Buy)",
              "isCorrect": true
            },
            {
              "text": "做空 (Sell)",
              "isCorrect": false
            }
          ],
          "explain": "strategy.long 代表多头方向，strategy.short 代表空头方向。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "l9_risk_management",
      "title": "策略 2: 风险管理 (SL/TP)",
      "subtitle": "strategy.exit 实现止盈止损",
      "concept": "ENC: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",
      "summary": [
        "strategy.exit 必须绑定 from_entry",
        "stop/limit 用价格；loss/profit 用点数距离",
        "止盈止损组合即 OCO：成交其一取消其二",
        "常用 ATR 动态止损，统一不同波动风险",
        "回测要纳入滑点与跳空风险",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI7BxYMTyIDVUwaXEkBEwIdAwVBBUwCHAtMbWVASxjQltGOwPKC8uiDgocyFggdEUdSTxBZFksdCEYGCwAcARQYCUBAZBYLABhEBRhMEUcdCAZHDAhXS11cSVxVTmVlSxcY3fXMi/ndifLF3IOOn9X0jOD+iuuxMlEWSRoESQwdC0tLVwYMHE0BDhwQFBhLHAYZTG1PT0QYS0wCCBoAABZBAVZMSglBTCgeIwAKXxoUUBoaFwYbCgNBFlQfBwlMbU9PRBgyGFBJTkpITxwQSllMFQ4XSwIXBhAY36zYjdTrgMHOg6i+3Mv6itjqhu/k3b+CeklORUdAQERISlcWABpfR4nCxt+jsJfr14Py309MTFFbGxpHb0dPT0QXFxgcBh0WXU+JyZrete+O7NyB+t9EEExREwIdTG1PT0QYS0wCCBoAABZBAUBRTFhLKx0OG01IGBp1CSUBCwBNQ0RISlcWABpYVl9fSBhUVwMaU1BXRg==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhMFDxYUTz0NS1NrBBsPEQIIFkxaTBYjHRwEEwoIHRECMlBJTkUDCglEVl1ABEEdAAsJRl4yGBhQSU5FR09MRN25v5jH0IDQ3YnfmdCOw4zrwILz1YKlmdzL32RFR09PRBgYGBkPThYCAwlKW0pXAxoBEwIdT1oYCAJ6SU5FR09PRBgYGFBJTUWC1+2Ag4/d/fyK3NeK6sEyGBhQSU5FR09PRBgYSxUFCEsFGhZMETIYUElORUdPT0QYGBh6SU5FR09PRBgYGFBJTUUlDgwPTEpZFAwcRYLB8YO2iN7dy4n+74nCxt61p5np9IDf14b4uNCe8Y/n7oLlx4OWmd/g74bLxYri8TIYGFBJTkVHT09EGBgbUI/m84/v6oCFh9/kwU4qJCBPTHdWXVAqDwsECgMXGHdMGAwcTEeHwcbdta2X0upvR09PRBgYGFBJTkVHZU9EGBgYUElORUdPTxRKUVsVSVNFFAoDAhZcWQQIQAYLABwBYwhleklORUdPT0QYGBhQSU1Fgu7ojJaGGEFJiefeT1JECRjfzueL4ORlT0QYGBhQSU5FR09PF0xXSC8ZHAwECk9ZGEhKGQoLRUpPWlQYMhhQSU5FR09PRBgYGBwAAwwTMB8WUVtdUFROFRUGDAEYExhBWV5vR09PRBgYGFBJTkVHZU9EGBgYUElORUdPT0cY3rfgjdTBgcLNgrWn3f38ZEVHT09EGBgYUElORRQKAwIWS10cBUYAHwoMEEFIXU0LGksoHQsBShZrBAYeSUcfHQ1bXQUDHQEVOB8dDVtdEXpJTkVHT09EGBgYUElNRYHg/4CCnN7dy4n+74ri8TIYGFBJTkVHT09EGBhLFQUISxQKAwgQXUAVChocFwpSBkwWdwINCxdJIwYJUUwUUBkcDAQKUghRVVEENh4XDgwKTQ==",
      "quiz": [
        {
          "q": "strategy.exit() 中 profit=100 的单位是什么？",
          "choices": [
            {
              "text": "价格",
              "isCorrect": false
            },
            {
              "text": "百分比",
              "isCorrect": false
            },
            {
              "text": "点数 (Ticks/Points)",
              "isCorrect": true
            }
          ],
          "explain": "profit 和 loss 参数通常是指最小价格变动单位（Ticks）或点数，具体取决于 symbol 设置。"
        },
        {
          "q": "如果想按具体价格止损，应该用哪个参数？",
          "choices": [
            {
              "text": "loss",
              "isCorrect": false
            },
            {
              "text": "stop",
              "isCorrect": true
            },
            {
              "text": "limit",
              "isCorrect": false
            }
          ],
          "explain": "stop 参数指定止损触发的价格水平。"
        },
        {
          "q": "OCO (One Cancels Other) 订单是什么意思？",
          "choices": [
            {
              "text": "止盈和止损单，一个成交后另一个自动取消",
              "isCorrect": true
            },
            {
              "text": "必须同时成交",
              "isCorrect": false
            },
            {
              "text": "只能手动取消",
              "isCorrect": false
            }
          ],
          "explain": "strategy.exit 创建的止盈止损对就是典型的 OCO 订单。"
        },
        {
          "q": "Backtrader 中如何实现 OCO？",
          "choices": [
            {
              "text": "自动实现",
              "isCorrect": false
            },
            {
              "text": "使用 transmit=False 和 parent 参数",
              "isCorrect": true
            }
          ],
          "explain": "在 Backtrader 中创建 Bracket Order 需要将主单的 transmit 设为 False，并将止盈止损单关联到主单。"
        },
        {
          "q": "Trailing Stop (移动止损) 可以在 strategy.exit 中设置吗？",
          "choices": [
            {
              "text": "可以 (trail_price, trail_offset)",
              "isCorrect": true
            },
            {
              "text": "不可以",
              "isCorrect": false
            }
          ],
          "explain": "strategy.exit 支持 trail_points/price/offset 参数来实现移动止损。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_dual_ma",
      "title": "策略 3: 双均线交叉 (Dual MA)",
      "subtitle": "最简单的趋势策略",
      "concept": "ENC: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",
      "summary": [
        "用 crossover/crossunder 捕捉趋势启动与结束",
        "趋势段盈利覆盖震荡期多次小亏",
        "EMA 更敏感，SMA 更稳；周期差决定过滤强度",
        "ADX/均线斜率可做震荡过滤",
        "ATR 止损/移动止损提升可用性",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFItGwQLTyIlGhQYHx8LFwsOFllMSk0VQGQDBhwbRAUYTBFHHQgGRwwIV0tdXElfVU5lHAhXTxhNSRoESRwCBRBbVB8aC0lHXV9NMjJRFkkaBEkMHQtLS1cGDBxNAQ4cEBQYSxwGGUxtT09EGEtMAggaAAAWQQFWTEoJQUwpCAEIRhQYSwQbDxECCBZKVFdWF0BkDAFPGwUWW0ofGh0QCQsKFhBeWQMdQkUUAwATETIYUElOFhMdDhBdX0FeCgIKFApHRnRXVhdLRw==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkPThYCAwlKXllLBDJeOEdRTxddVF5eGgIKEDRfORhZVhRJHQALCUECWUtMK0RfOEdTUkRLXVQWRx0JCBg0SQllAnpJTkVHHAoIXhZaBRBGTG0KAw1eGEsVBQhLAQ4cEGMIZVBVThYCAwlKS1RXBzJeOEcOAQAYS10cD0ADBhwbPxUJZVBXU0UUCgMCFktUHx41SFYyVW4YGBhQGgsJAUEMCFdLXVhA",
      "quiz": [
        {
          "q": "双均线策略的主要缺点是？",
          "choices": [
            {
              "text": "震荡市频繁止损 (Whipsaw)",
              "isCorrect": true
            },
            {
              "text": "无法捕捉大趋势",
              "isCorrect": false
            }
          ],
          "explain": "在没有趋势的震荡行情中，均线会频繁交叉导致不断亏损。"
        },
        {
          "q": "Golden Cross (金叉) 是指？",
          "choices": [
            {
              "text": "短周期均线上穿长周期均线",
              "isCorrect": true
            },
            {
              "text": "长周期均线上穿短周期均线",
              "isCorrect": false
            }
          ],
          "explain": "快线上穿慢线。"
        },
        {
          "q": "如何优化均线策略？",
          "choices": [
            {
              "text": "加入趋势过滤器 (如 ADX)",
              "isCorrect": true
            },
            {
              "text": "缩短周期",
              "isCorrect": false
            }
          ],
          "explain": "引入 ADX 或其他过滤器避免在震荡市交易是常见优化手段。"
        },
        {
          "q": "Backtrader 中 CrossOver 指标可以简化逻辑吗？",
          "choices": [
            {
              "text": "可以 (bt.ind.CrossOver)",
              "isCorrect": true
            },
            {
              "text": "不可以",
              "isCorrect": false
            }
          ],
          "explain": "bt.indicators.CrossOver(fast, slow) 会返回 1 (上穿) 或 -1 (下穿)。"
        },
        {
          "q": "均线属于什么类型的指标？",
          "choices": [
            {
              "text": "滞后指标 (Lagging)",
              "isCorrect": true
            },
            {
              "text": "领先指标 (Leading)",
              "isCorrect": false
            }
          ],
          "explain": "均线基于历史价格计算，信号总是滞后于价格变化。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_rsi_reversal",
      "title": "策略 4: RSI 均值回归",
      "subtitle": "超卖买入，超买卖出",
      "concept": "ENC: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",
      "summary": [
        "更稳：先极端，再回到阈值内确认入场",
        "震荡更适合回归，强趋势里容易钝化接飞刀",
        "常用 ADX/均线做环境过滤",
        "ATR 止损与时间止损让风险可控",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI7PSxHPQoSXUpLEQVMTG0dT1kYTFleGx0MTwwDC0tdFFBYWkxtBglETFkWExsBFhQAGQFKEEpcSV1VTmVPRBgYSwQbDxECCBZKXVZMAhBGRysAAQMaFBgDHRwEEwoIHRZUVx4OR28OCU8QWRZbAgYdFhIBCwFKEEpcSVlVTmVPRBgYSwQbDxECCBZKW1RXAwxGRysAAQMaEQ==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkPTgsIG08XXVReXhkBFg4bBgtWAjJQSU5FDglPF11UXl4bHQw8XzJEBBgLQFNkRUdPT0QYGBgDDAIDSQ0aHRARMhUFHQBdZU9EGBhRFkkdAAsJQRZLUWNANE5bR1hfXjIYGFBJTkVHTxwBVF4WAwwCCU9G",
      "quiz": [
        {
          "q": "RSI 均值回归策略最怕什么行情？",
          "choices": [
            {
              "text": "单边暴涨暴跌",
              "isCorrect": true
            },
            {
              "text": "横盘震荡",
              "isCorrect": false
            }
          ],
          "explain": "在强趋势中，RSI 会长时间停留在超买/超卖区，导致过早逆势开仓被套。"
        },
        {
          "q": "如何改进 RSI 回归策略？",
          "choices": [
            {
              "text": "等待 RSI 重新回到正常区域再交易",
              "isCorrect": true
            },
            {
              "text": "一进入超卖区马上买",
              "isCorrect": false
            }
          ],
          "explain": "更好的做法是等 RSI 从下方穿回 30 以上确认反转。"
        },
        {
          "q": "Conners RSI 是什么？",
          "choices": [
            {
              "text": "一种适合短线回归的改进版 RSI",
              "isCorrect": true
            },
            {
              "text": "长周期 RSI",
              "isCorrect": false
            }
          ],
          "explain": "Conners RSI 结合了 RSI、连涨/连跌天数和 ROC，更适合短线反转。"
        },
        {
          "q": "Strategy.entry 的默认执行价格是？",
          "choices": [
            {
              "text": "开盘时的市价 (Market)",
              "isCorrect": true
            },
            {
              "text": "限价",
              "isCorrect": false
            }
          ],
          "explain": "默认是 Market 单，在信号产生的下一根 Bar 开盘执行。"
        },
        {
          "q": "RSI 策略通常胜率如何？",
          "choices": [
            {
              "text": "较高 (但盈亏比可能低)",
              "isCorrect": true
            },
            {
              "text": "极低",
              "isCorrect": false
            }
          ],
          "explain": "均值回归策略通常胜率较高，因为价格大部分时间在震荡。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_bb_breakout",
      "title": "策略 5: 布林带突破",
      "subtitle": "波动率爆发交易",
      "concept": "ENC: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",
      "summary": [
        "入场：close > upper（突破）",
        "出场：close < mid（回归中轨视为动能衰减）",
        "先用带宽 Squeeze 过滤，再交易扩张",
        "假突破多，止损与仓位管理是核心",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFIrLEUlHQoFU1dNBEtCRQgZChZUWUFNHRwQAkZlP1VRXFxJGxUXCh1IGFRXBwwcOEdSTxBZFloSQQ0JCBwKSBgKCFxJXExtBglEW1RXAwxOW0caHxRdSjJQSU5FFBsdBUxdXwlHCwsTHRZMGnRXHg5MSUccGxZZTF0XEEAJCAEITTJRXlAKAgoUCk9YGFVRFGNORUdPHBBKWUwVDhdLBAMAF10QGjwGAAJFRg==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkPThYCAwlKXFlMEUcNCQgcCj8IZRhOSR0ACwlBBloWVBkHCxZJGwAUYwhlSmNORUdPHAFUXhYSHBdNTmUKCFFeGAMMAgNJCw4QWRZbHAYdADxfMkQEGEsVBQhLBQ1BCFFWXQNHAwwDNF85AjIYUElOFgIDCUpbVFcDDEZM",
      "quiz": [
        {
          "q": "布林带突破属于什么类型的策略？",
          "choices": [
            {
              "text": "趋势跟随 (Trend Following)",
              "isCorrect": true
            },
            {
              "text": "均值回归",
              "isCorrect": false
            }
          ],
          "explain": "突破上轨做多是赌趋势会延续。"
        },
        {
          "q": "假突破 (False Breakout) 怎么处理？",
          "choices": [
            {
              "text": "严格止损",
              "isCorrect": true
            },
            {
              "text": "死扛",
              "isCorrect": false
            }
          ],
          "explain": "突破策略假信号多，必须配合止损。"
        },
        {
          "q": "布林带策略中，平仓条件常用什么？",
          "choices": [
            {
              "text": "回归中轨",
              "isCorrect": true
            },
            {
              "text": "突破另一侧轨道",
              "isCorrect": false
            }
          ],
          "explain": "回归中轨意味着短期趋势动能减弱，是常用的止盈点。"
        },
        {
          "q": "%B 指标的作用？",
          "choices": [
            {
              "text": "量化价格在布林带中的位置",
              "isCorrect": true
            },
            {
              "text": "计算带宽",
              "isCorrect": false
            }
          ],
          "explain": "%B = (Price - Lower) / (Upper - Lower)。"
        },
        {
          "q": "什么是“布林带张口”？",
          "choices": [
            {
              "text": "上下轨急速扩张，预示大行情",
              "isCorrect": true
            },
            {
              "text": "上下轨收缩",
              "isCorrect": false
            }
          ],
          "explain": "张口伴随价格突破是强烈的入场信号。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_inside_bar",
      "title": "策略 6: Inside Bar (孕线突破)",
      "subtitle": "Price Action 经典形态",
      "concept": "ENC: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",
      "summary": [
        "high < high[1] and low > low[1]",
        "使用 strategy.entry(stop=price)",
        "Backtrader: Order.Stop",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFIgABYOCwpEellKUkBkDBQmARdRXF1QVE4NDggHRAQYUBkOBj5WMk8FVlwYHAYZRVlPAwtPYwktYwcDRwYcLVZLURQMZEVHT08XTEpZBAwJHEkKARBKQRBSKxscJR0KBVMaFFAaGhcGGwoDQRZUHwcJSUccGwtIBVAZDgZMbU9PRBhLTAIIGgAAFkEBVkxKCUFMNgIDAyZKXVkbS0JFFBsdBUxdXwlHHQ0IHRtIGEtMHxlTCQgYRg==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkaMQwJHAYAXRgFUBoLCQFBCwVMWRYYAAkNPF8yRAQYSxUFCEsDDhsFFlBRFwE1SFYyTwVWXBgsY05FR09PRBgYGFBJThYCAwlKXFlMEUcCChA0XzkYBhgDDAIDSQsOEFkWVB8eNUhWMmUNXhhRAzYHCxQGCwECMhhQSU4WAgMJSlpNQVgMFgAEGxYUXQVaBEchFwMKHUprTFcARU4VFQYMAQVLXRwPQAEGGw5KUFFfGDJeOE4=",
      "quiz": [
        {
          "q": "Inside Bar 代表市场处于什么状态？",
          "choices": [
            {
              "text": "收敛、犹豫、积蓄能量",
              "isCorrect": true
            },
            {
              "text": "极度疯狂",
              "isCorrect": false
            }
          ],
          "explain": "波动率压缩，随后通常会有扩张。"
        },
        {
          "q": "Mother Bar 是指？",
          "choices": [
            {
              "text": "Inside Bar 的前一根 K 线",
              "isCorrect": true
            },
            {
              "text": "Inside Bar 的后一根",
              "isCorrect": false
            }
          ],
          "explain": "包容当前 K 线的那根大 K 线被称为 Mother Bar。"
        },
        {
          "q": "Stop 单 (停止单) 的作用是？",
          "choices": [
            {
              "text": "价格触及指定位置才触发成交 (突破买入)",
              "isCorrect": true
            },
            {
              "text": "立即成交",
              "isCorrect": false
            }
          ],
          "explain": "Buy Stop 挂在现价上方，用于突破买入；Buy Limit 挂在下方，用于回调买入。"
        },
        {
          "q": "Inside Bar 失败意味着什么？",
          "choices": [
            {
              "text": "突破后迅速拉回 (假突破)",
              "isCorrect": true
            },
            {
              "text": "没有突破",
              "isCorrect": false
            }
          ],
          "explain": "假突破是 Price Action 交易中常见的陷阱。"
        },
        {
          "q": "Hikkake 模式与 Inside Bar 的关系？",
          "choices": [
            {
              "text": "Hikkake 是 Inside Bar 的假突破反转形态",
              "isCorrect": true
            },
            {
              "text": "没关系",
              "isCorrect": false
            }
          ],
          "explain": "Hikkake 专门利用 Inside Bar 突破失败的人群止损进行反向交易。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_turtle",
      "title": "策略 7: Donchian Breakout (海龟交易)",
      "subtitle": "唐奇安通道突破",
      "concept": "ENC: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",
      "summary": [
        "ta.highest(20)",
        "ta.lowest(10)",
        "经典的趋势跟随系统",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI9GxcTAwpEekpdEQIBEBNNRm5QUV8YW15FWk8bBRZQURcBCxYTRwcNX1AUUFteTDxeMkQXFxiW8caAw8aI/rwKCJb+y4zM94jmgTJUHx5fVUdSTxBZFlQfHgsWE0cDC08UGEFZRz5WMmVuUV4YEwUBFgJPUURQUV8YW15vR09PREtMShEdCwIeQQoKTEpBWEsiCgkITUgYS0wCCBoAABZBCFdWX1ljBwNHDAMLS10YTEkCChBeX24YGBhQGhoXBhsKA0EWWxwGHQBPTSMLVl8aWQ==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMgMMAgNJBwYDUAoIUFROBxNBBgpcFnAZDgYAFBtHF11UXl4NDxEGQQcNX1AUUBkLFw4AC1kKCBF6AAhFFAoDAhZcWQQIQAYLABwBYwhlUFdOFgIDCUpQUV8YW14+Sl4yXjIYGFBJHQALCUEGTUEQWQ==",
      "quiz": [
        {
          "q": "为什么引用 highest 时要用 [1]？",
          "choices": [
            {
              "text": "避免未来函数 (用到当前Bar的高点)",
              "isCorrect": true
            },
            {
              "text": "语法规定",
              "isCorrect": false
            }
          ],
          "explain": "如果在盘中计算 highest(20) 包含了当前价格，那么只要价格创新高就会触发，这在回测中没问题，但在实盘中需要确认突破的是“过去”的高点。"
        },
        {
          "q": "海龟法则的离场周期通常比入场周期？",
          "choices": [
            {
              "text": "短 (如入场20，离场10)",
              "isCorrect": true
            },
            {
              "text": "长",
              "isCorrect": false
            }
          ],
          "explain": "让利润奔跑，但一旦趋势反转（跌破短期低点）快速离场。"
        },
        {
          "q": "海龟法则如何加仓？",
          "choices": [
            {
              "text": "每上涨 0.5 N 加仓一次",
              "isCorrect": true
            },
            {
              "text": "亏损加仓",
              "isCorrect": false
            }
          ],
          "explain": "Pyramiding (金字塔加仓) 是海龟法则扩大利润的关键。"
        },
        {
          "q": "Donchian Channel 的中轨是？",
          "choices": [
            {
              "text": "(High20 + Low20) / 2",
              "isCorrect": true
            },
            {
              "text": "SMA20",
              "isCorrect": false
            }
          ],
          "explain": "唐奇安通道中轨是最高和最低的平均值。"
        },
        {
          "q": "趋势跟随策略在什么行情下表现最差？",
          "choices": [
            {
              "text": "震荡市",
              "isCorrect": true
            },
            {
              "text": "大牛市",
              "isCorrect": false
            },
            {
              "text": "大熊市",
              "isCorrect": false
            }
          ],
          "explain": "震荡市中突破多为假突破，导致连续亏损。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_grid",
      "title": "策略 8: Grid Trading (网格交易)",
      "subtitle": "震荡市的收割机",
      "concept": "ENC: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",
      "summary": [
        "适合横盘震荡",
        "使用 strategy.order(limit=...)",
        "怕单边破网",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFIuHAwDTyocWVVIHAxMTG1AQETflriV5PuD2/uIwILXhOqPweqP2ONECR0YlNDegOLKZQNKUVwvBQsTAgNPWRhbVB8aC0VNT19KAQEyAx0cBBMKCB0WXVYEGxdNRS0aHX9KURRLQkUUGx0FTF1fCUcCCgkIQ0RUUVUZHVMCFQYLO1RdThUFRw==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMlNJh/nniMHF36i+lc30gd/FTxRdVlwZBwlFCB0LAUpLMgMMAgNJDRodEF1AFQoaHBcKUgZMFncCDQsXSSMGCVFMFFAZHAwEClIQWUpfFR0xFRUGDAER",
      "quiz": [
        {
          "q": "网格交易最大的风险是？",
          "choices": [
            {
              "text": "单边行情突破网格区间 (破网)",
              "isCorrect": true
            },
            {
              "text": "手续费太低",
              "isCorrect": false
            }
          ],
          "explain": "单边下跌会满仓被套，单边上涨会踏空。"
        },
        {
          "q": "等差网格和等比网格的区别？",
          "choices": [
            {
              "text": "等差是价格差固定，等比是百分比固定",
              "isCorrect": true
            },
            {
              "text": "没有区别",
              "isCorrect": false
            }
          ],
          "explain": "等比网格在价格较高时网格间距更大。"
        },
        {
          "q": "Pine Script 回测网格策略的限制？",
          "choices": [
            {
              "text": "默认最大金字塔层数限制 (pyramiding)",
              "isCorrect": true
            },
            {
              "text": "无法挂单",
              "isCorrect": false
            }
          ],
          "explain": "strategy() 默认 pyramiding=1，网格策略必须调大这个参数 (如 pyramiding=100)。"
        },
        {
          "q": "无限网格 (Infinity Grid) 是指？",
          "choices": [
            {
              "text": "保持持仓价值恒定，上涨卖出部分",
              "isCorrect": true
            },
            {
              "text": "网格数量无限",
              "isCorrect": false
            }
          ],
          "explain": "一种变种，旨在解决上涨踏空问题。"
        },
        {
          "q": "Backtrader 处理网格需要注意？",
          "choices": [
            {
              "text": "订单对象的生命周期管理",
              "isCorrect": true
            },
            {
              "text": "无法处理",
              "isCorrect": false
            }
          ],
          "explain": "需要追踪每个挂单的状态，成交后补单。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_dca",
      "title": "策略 9: DCA (马丁格尔/定投)",
      "subtitle": "成本平均策略",
      "concept": "ENC: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",
      "summary": [
        "strategy(pyramiding=10)",
        "avg_price 会自动更新",
        "需深口袋",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFItLSRFQ08LTl1KHAgXWBMdGgEUGEgJGw8IDgsGCl8FDVljZEpIT4vfj96YzI/B8YHj7oCDq93t7ore0IfY6BgNHVCM5MWD1PxuUV4YAx0cBBMKCB0WSFcDABoMCAEwF1FCXVBXTlVHDgEAGFtUHxoLRVtPHBBKWUwVDhdLFwAcDUxRVx42DxMAMB8WUVtdUENOVUlWWm4YGBhQGhoXBhsKA0EWXR4dHBxPTSsneRh6BRBMSUccGxZZTF0XEEAJCAEITQ==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMhkPThYCAwlKSFdLGR0HCglVZUQYGBgZD04WAgMJSlxZTBFHDQkIHAo/CGUYTEkdAAsJQRRXS1EEAAELSR8dDVtdGFpJXkteWlVuGBgYUElORUccCgheFloFEEZMR0xPgbKY3Mv6",
      "quiz": [
        {
          "q": "DCA 的核心目的是？",
          "choices": [
            {
              "text": "摊低持仓成本",
              "isCorrect": true
            },
            {
              "text": "追求暴利",
              "isCorrect": false
            }
          ],
          "explain": "通过在低位买入更多份额，降低整体平均成本。"
        },
        {
          "q": "马丁格尔策略与 DCA 的区别？",
          "choices": [
            {
              "text": "马丁是亏损加倍下注，DCA 通常是固定金额/数量",
              "isCorrect": true
            },
            {
              "text": "一样",
              "isCorrect": false
            }
          ],
          "explain": "马丁策略风险呈指数级增长。"
        },
        {
          "q": "在 Pine Script 中获取当前持仓均价的变量是？",
          "choices": [
            {
              "text": "strategy.position_avg_price",
              "isCorrect": true
            },
            {
              "text": "strategy.price",
              "isCorrect": false
            }
          ],
          "explain": "这是系统内置变量，自动计算加权平均价。"
        },
        {
          "q": "如果资金有限，马丁策略最终会导致？",
          "choices": [
            {
              "text": "爆仓 (Blow up)",
              "isCorrect": true
            },
            {
              "text": "必定盈利",
              "isCorrect": false
            }
          ],
          "explain": "市场的不理性可能持续得比你的资金更久。"
        },
        {
          "q": "Backtrader 默认允许加仓吗？",
          "choices": [
            {
              "text": "允许",
              "isCorrect": true
            },
            {
              "text": "不允许",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 默认支持多次 buy()，持仓量会累加。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_pivot",
      "title": "策略 10: Pivot Reversal (枢轴点反转)",
      "subtitle": "左侧交易摸顶抄底",
      "concept": "ENC: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",
      "summary": [
        "ta.pivothigh / ta.pivotlow",
        "信号有滞后 (需要等右侧 N 根确认)",
        "左侧交易",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI5BxMIG082XU5dAhoPCUVDTwtOXUocCBdYEx0aAREyVBUPGkVaT1tIGEpRFwEaRVpPXW5IVBhNSRoESR8GEldMVB8eRgkCCRtIGEpRFwEaTG1lQEsY3bfaj/LsgvPHg5mW0N7Ni/XpiPXg0bqblsnXLoDV0ERIVBiW4OOD++aK5ITXhPyM/sOC5/aAgIIYHghkDAFPAQtMGFYRQR4JTmVPRBgYSwQbDxECCBZKXVZMAhBGRysAAQMaFBgDHRwEEwoIHRZUVx4ORw==",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMlNJh/nnh+jO0Jm0lcfwgunfTzRRTlcESYfl3IfR9TIbGJbK7oP4yk8AWUxZK0RcOEeJ98vdqJ6W8cGB2uGI5oEYEJXo6Y3J0U8WUV9QBFRcTA==",
      "quiz": [
        {
          "q": "Pivot Point 信号是实时的吗？",
          "choices": [
            {
              "text": "不是，有滞后",
              "isCorrect": true
            },
            {
              "text": "是实时的",
              "isCorrect": false
            }
          ],
          "explain": "必须等待右侧 N 根 K 线走完，确认中间是极值点后，信号才会出现。"
        },
        {
          "q": "ta.pivotlow(5, 5) 需要等待几根 K 线确认？",
          "choices": [
            {
              "text": "5根",
              "isCorrect": true
            },
            {
              "text": "0根",
              "isCorrect": false
            }
          ],
          "explain": "需要等待右侧 5 根 K 线全部高于中间点，才能确认 Pivot Low。"
        },
        {
          "q": "Repainting (重绘) 在 Pivot 指标中常见吗？",
          "choices": [
            {
              "text": "如果不小心编写，非常常见",
              "isCorrect": true
            },
            {
              "text": "不会重绘",
              "isCorrect": false
            }
          ],
          "explain": "如果在右侧未确认时就画图，后续价格跌破低点，原来的 Pivot 标记会消失（重绘）。ta.pivotlow 返回的值是确认后的，不会重绘，但信号是滞后的。"
        },
        {
          "q": "Pivot 策略适合什么行情？",
          "choices": [
            {
              "text": "震荡区间",
              "isCorrect": true
            },
            {
              "text": "强烈单边趋势",
              "isCorrect": false
            }
          ],
          "explain": "在单边下跌中，Pivot Low 会不断创新低，导致不断抄底被埋。"
        },
        {
          "q": "如何用 Pivot 画支撑阻力线？",
          "choices": [
            {
              "text": "连接多个 Pivot High/Low",
              "isCorrect": true
            },
            {
              "text": "连接收盘价",
              "isCorrect": false
            }
          ],
          "explain": "Pivot 点通常被视为重要的市场结构点。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_mtf",
      "title": "策略 11: Multi-Timeframe (多周期共振)",
      "subtitle": "大周期看趋势，小周期找入场",
      "concept": "ENC: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",
      "summary": [
        "request.security(sym, timeframe, expr)",
        "注意 Repainting 问题",
        "lookahead 参数需谨慎",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFIkOiNHPBsWWUxdFxBMTG1AQETQto+V5viD8MqI3oferMaO9f2D1NhuXFlRHBAxBgsAHAEYBRgCDB8QAhwbSktdWwUbBxEeRxwdVVFWFgZAEQ4MBAFKUVxcSUwhRUNPB1RXSxVAZG9IQE+Bt5Le7OCL2PSJ+MHfgoeV9caB3+WJ0pDer8aG0umB5uKBpJDdzfqL7OqK/szepKeV6PSAw/VlDV4YXBEAAhw4DAMLS10YTkkKBA4DFjtbVFcDDDVUOk8OClwYTBFHDRcIHBwLTl1KWB0PSxQCDkxbVFcDDEJUV0ZDRExZFgMED00EAwAXXRQKQEBHb0dPT0RLTEoRHQsCHkEKCkxKQVhLIgoJCE1IGEtMAggaAAAWQQhXVl9Z",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMlNJDQAVCg0WVxZKFRoPCBcDCgBZTFlYDQ8RBkNPEFFVXRYbDwgCUg0QFmxRHQwoFwYCCkp8WUEDQGRGR4rzzBhLTAIIGgAAFk+AgJXczdaJ8c9PHAFUXhYUCBoEV09HgYi33eHBiPn4RkNES11UFkcKBBMOXkQQ3ZzXjP/NgfPwTQ==",
      "quiz": [
        {
          "q": "request.security() 的作用是？",
          "choices": [
            {
              "text": "获取其他周期或品种的数据",
              "isCorrect": true
            },
            {
              "text": "加密数据",
              "isCorrect": false
            }
          ],
          "explain": "这是 Pine Script 获取多周期数据的核心函数。"
        },
        {
          "q": "为什么 request.security 容易导致重绘 (Repainting)？",
          "choices": [
            {
              "text": "如果在历史数据中引用了未来的收盘价 (如日线未收盘就获取了最终收盘价)",
              "isCorrect": true
            },
            {
              "text": "网络延迟",
              "isCorrect": false
            }
          ],
          "explain": "在回测历史数据时，小周期 K 线可能会获取到当时尚未形成的“未来”大周期收盘价。应使用 barmerge.lookahead_on 慎重处理，或接受 barmerge.lookahead_off 的滞后。"
        },
        {
          "q": "Backtrader 如何处理多周期？",
          "choices": [
            {
              "text": "传入多个 data feed (adddata)",
              "isCorrect": true
            },
            {
              "text": "不支持",
              "isCorrect": false
            }
          ],
          "explain": "Backtrader 支持多数据源，可以在 strategy 中通过 self.data0, self.data1 访问。"
        },
        {
          "q": "三重滤网交易法 (Triple Screen) 的核心是？",
          "choices": [
            {
              "text": "多周期分析",
              "isCorrect": true
            },
            {
              "text": "三个显示器",
              "isCorrect": false
            }
          ],
          "explain": "Alexander Elder 提出的经典多周期策略。"
        },
        {
          "q": "小周期服从大周期的意思是？",
          "choices": [
            {
              "text": "顺着大周期趋势交易胜率更高",
              "isCorrect": true
            },
            {
              "text": "大周期数据更准确",
              "isCorrect": false
            }
          ],
          "explain": "大周期趋势具有惯性，小周期波动往往是噪音。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "strat_trailing",
      "title": "策略 12: Volatility Stop (移动止损)",
      "subtitle": "让利润奔跑",
      "concept": "ENC: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",
      "summary": [
        "strategy.exit(trail_points, trail_offset)",
        "保护浮盈",
        "避免过早离场",
        "把策略拆成信号/执行/风控三段式，定位问题更快",
        "回测必须纳入滑点与手续费，高频策略尤其关键"
      ],
      "pine_code": "ENC:X0YuEwIdHA1XVgVFYx0RFQ4bAV9BEFI9HAQOAwYKXxhrBAYeR05lBgIYTFleChwKFBwAEl1KEAQIQBYKDkcHVFdLFUVOVFdGQ0RMWRYDBA9NBAMAF10UGEJZR0xtT09EGEtMAggaAAAWQQFWTEoJQUwpCAEIRhQYSwQbDxECCBZKVFdWF0Bkb0hAT4GFq9zL3ojF24vX7t6OkJjf643Y6E9VCAgYl+vXgPfhgNi03ajfjOTNgMjUgbKQ3t3LiOj4gNPo3aOmlvvKRVJfT4O6gd7dy4jo+GUcEEpZTBUOF0sCFwYQEBp9CAAaR0tPTShXVl9SRU4RFQ4GCGdIVxkHGhZaXl9UFBhMAggHCTgACQJLXUxNXF5M",
      "python_code": "ENC:U0k+HBMHAAoYEHoRCgURFQ4LAUoRMgMMAgNJDRodEF1AFQoaHBcKUgZMFncCDQsXSTwbC0hsShEAAklHGx0FUVRZHQYbCxNSWlQRMhtQj+bzj+/qgrGz3frBi/nPTwEBQEwQWUmK3cqH3+ferYxQGhoKF08fFlFbXQ==",
      "quiz": [
        {
          "q": "移动止损的主要好处是？",
          "choices": [
            {
              "text": "保护浮动利润，同时保留上涨空间",
              "isCorrect": true
            },
            {
              "text": "保证买在最低点",
              "isCorrect": false
            }
          ],
          "explain": "Lock in profits while giving the trade room to grow."
        },
        {
          "q": "吊灯止损 (Chandelier Exit) 基于什么计算？",
          "choices": [
            {
              "text": "最高价 (High) 和 ATR",
              "isCorrect": true
            },
            {
              "text": "收盘价和 RSI",
              "isCorrect": false
            }
          ],
          "explain": "通常是 Highest High - N * ATR。"
        },
        {
          "q": "trail_points=100, trail_offset=50 的意思是？",
          "choices": [
            {
              "text": "盈利100点激活，此时止损在现价-50点",
              "isCorrect": true
            },
            {
              "text": "盈利100点止盈，亏损50点止损",
              "isCorrect": false
            }
          ],
          "explain": "trail_points 是激活阈值，trail_offset 是追踪距离。"
        },
        {
          "q": "Backtrader 有专门的移动止损订单类型吗？",
          "choices": [
            {
              "text": "有 (StopTrail)",
              "isCorrect": true
            },
            {
              "text": "没有，必须手动写逻辑",
              "isCorrect": false
            }
          ],
          "explain": "bt.Order.StopTrail 支持动态调整止损价。"
        },
        {
          "q": "移动止损太紧 (Offset太小) 会导致？",
          "choices": [
            {
              "text": "容易被噪音震荡出局 (Premature Stop-out)",
              "isCorrect": true
            },
            {
              "text": "利润最大化",
              "isCorrect": false
            }
          ],
          "explain": "需要给予市场正常的呼吸空间（波动）。"
        }
      ],
      "category": "量化策略 (Strategies)",
      "isLocked": true,
      "isEncrypted": true
    },
    {
      "id": "ref_ta_all",
      "title": "附录: TA 命名空间全集",
      "subtitle": "Pine Script 技术指标速查手册",
      "concept": "<h3>TA 命名空间全集 (Reference)</h3><p>这里罗列了 Pine Script v5 <code>ta</code> 命名空间下几乎所有的技术分析函数。这是你的<b>速查手册</b>。</p><h4>Moving Averages (移动平均)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.sma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>简单移动平均线 (Simple MA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>pandas: df['close'].rolling(n).mean()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.ema</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>指数移动平均线 (Exponential MA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>pandas: df['close'].ewm(span=n).mean()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.wma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>加权移动平均线 (Weighted MA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.WMA(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.rma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>RSI 专用移动平均 (Wilder's MA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.rma()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.vwma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>成交量加权移动平均 (Volume Weighted MA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.vwma()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.alma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length, offset, sigma</td><td style='padding: 8px; border-bottom: 1px solid #333;'>Arnaud Legoux 移动平均</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.alma()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.swma</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source</td><td style='padding: 8px; border-bottom: 1px solid #333;'>对称加权移动平均 (Symmetrically WMA)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>N/A (需手动实现)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.linreg</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length, offset</td><td style='padding: 8px; border-bottom: 1px solid #333;'>线性回归曲线</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.LINEARREG(close, n)</td></tr></table></div><h4>Oscillators (震荡指标)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.rsi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>相对强弱指数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.RSI(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.stoch</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, high, low, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>随机指标 (K值)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.STOCH...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.tsi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, short, long</td><td style='padding: 8px; border-bottom: 1px solid #333;'>真实强度指数 (True Strength Index)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.tsi()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.mfi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>资金流量指标 (Money Flow Index)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MFI(high, low, close, vol, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.cci</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>顺势指标 (Commodity Channel Index)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.CCI(high, low, close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.roc</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>变动率 (Rate of Change)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.ROC(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.mom</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>动量 (Momentum)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MOM(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.willr</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>威廉指标 (Williams %R)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.WILLR(high, low, close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.cmo</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>钱德动量摆动指标</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.CMO(close, n)</td></tr></table></div><h4>Trend & Volatility (趋势与波动)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.macd</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, fast, slow, signal</td><td style='padding: 8px; border-bottom: 1px solid #333;'>MACD 指标</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MACD...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.bb</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length, mult</td><td style='padding: 8px; border-bottom: 1px solid #333;'>布林带</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.BBANDS...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.kc</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length, mult, useTrueRange</td><td style='padding: 8px; border-bottom: 1px solid #333;'>肯特纳通道 (Keltner Channels)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.kc()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.atr</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>平均真实波幅</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.ATR(high, low, close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.sar</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>start, inc, max</td><td style='padding: 8px; border-bottom: 1px solid #333;'>抛物线转向 (Parabolic SAR)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.SAR(high, low, ...)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.supertrend</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>factor, period</td><td style='padding: 8px; border-bottom: 1px solid #333;'>超级趋势</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.supertrend()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.dmi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>di_len, adx_len</td><td style='padding: 8px; border-bottom: 1px solid #333;'>DMI/ADX 系统</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.ADX / talib.PLUS_DI...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.aroon</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>阿隆指标 (Aroon)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.AROON... (returns up, down)</td></tr></table></div><h4>Volume (成交量)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.obv</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'></td><td style='padding: 8px; border-bottom: 1px solid #333;'>能量潮 (On Balance Volume)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.OBV(close, volume)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.vwap</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source</td><td style='padding: 8px; border-bottom: 1px solid #333;'>成交量加权平均价</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.vwap()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.pvi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'></td><td style='padding: 8px; border-bottom: 1px solid #333;'>正量指标 (Positive Volume Index)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.pvi()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.nvi</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'></td><td style='padding: 8px; border-bottom: 1px solid #333;'>负量指标 (Negative Volume Index)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>Pandas TA: ta.nvi()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.accdist</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'></td><td style='padding: 8px; border-bottom: 1px solid #333;'>累积/派发线 (A/D)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.AD(high, low, close, vol)</td></tr></table></div><h4>Statistics & Math (统计与数学)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.stdev</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>标准差</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.STDDEV(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.variance</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>方差</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.VAR(close, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.correlation</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>src1, src2, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>相关系数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.CORREL(x, y, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.median</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>中位数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>df.rolling(n).median()</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.mode</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>众数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>scipy.stats.mode</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.range</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>极差 (Max - Min)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>rolling max - min</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.percentrank</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>百分位排名</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>scipy.stats.percentileofscore</td></tr></table></div><h4>Analysis Logic (分析逻辑)</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin-bottom: 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align: left;'><th style='padding: 8px; border-bottom: 1px solid #333;'>函数名</th><th style='padding: 8px; border-bottom: 1px solid #333;'>常用参数</th><th style='padding: 8px; border-bottom: 1px solid #333;'>说明</th><th style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e;'>Python 对应</th></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.crossover</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>src1, src2</td><td style='padding: 8px; border-bottom: 1px solid #333;'>上穿 (金叉)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>(s1 > s2) & (s1.shift(1) <= s2.shift(1))</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.crossunder</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>src1, src2</td><td style='padding: 8px; border-bottom: 1px solid #333;'>下穿 (死叉)</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>(s1 < s2) & (s1.shift(1) >= s2.shift(1))</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.barssince</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>condition</td><td style='padding: 8px; border-bottom: 1px solid #333;'>自上次满足条件以来的 K 线数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>需自定义逻辑实现</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.valuewhen</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>condition, source, occurrence</td><td style='padding: 8px; border-bottom: 1px solid #333;'>当条件满足时的值</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>df[cond]['source']...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.highest</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>周期内最高值</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MAX(source, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.lowest</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>周期内最低值</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MIN(source, n)</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.highestbars</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>最高值距离当前的 K 线数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MAXINDEX...</td></tr><tr><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>ta.lowestbars</td><td style='padding: 8px; border-bottom: 1px solid #333; font-family: monospace;'>source, length</td><td style='padding: 8px; border-bottom: 1px solid #333;'>最低值距离当前的 K 线数</td><td style='padding: 8px; border-bottom: 1px solid #333; color: #8b949e; font-size: 12px;'>talib.MININDEX...</td></tr></table></div>",
      "summary": [
        "ta 命名空间包含了所有技术指标",
        "Python 中常用 TALib 或 Pandas TA 库替代",
        "ta.crossover 是最常用的逻辑函数",
        "善用 ta.barssince 和 ta.valuewhen 处理状态逻辑"
      ],
      "pine_code": "//@version=5\nindicator(\"TA Kitchen Sink\", overlay=true)\n\n// 演示一些不常用的 TA 函数\n\n// 1. 抛物线转向 (SAR)\nsar_val = ta.sar(0.02, 0.02, 0.2)\nplot(sar_val, style=plot.style_cross, color=color.white)\n\n// 2. 钱德动量摆动指标 (CMO)\ncmo = ta.cmo(close, 14)\n// 不在主图绘制，仅计算\n\n// 3. 线性回归 (Linear Regression)\nlinreg = ta.linreg(close, 20, 0)\nplot(linreg, color=color.orange, linewidth=2)\n\n// 4. 肯特纳通道 (Keltner Channels)\n[kc_mid, kc_upper, kc_lower] = ta.kc(close, 20, 2)\n// fill(plot(kc_upper), plot(kc_lower), color=color.new(color.blue, 90))\n\n// 5. 威廉指标\nwillr = ta.willr(14)\n\n// 6. 相关性 (Correlation)\n// 计算收盘价与成交量的相关性\ncorr = ta.correlation(close, volume, 20)\n\n// 7. 统计\nstd = ta.stdev(close, 20)\nmedian_price = ta.median(close, 10)\n",
      "python_code": "# Python (使用 Pandas TA 库)\nimport pandas_ta as ta\n\n# 1. SAR\ndf.ta.sar(append=True)\n\n# 2. CMO\ndf.ta.cmo(length=14, append=True)\n\n# 3. Linear Regression\ndf.ta.linreg(length=20, append=True)\n\n# 4. KC\ndf.ta.kc(length=20, scalar=2, append=True)\n\n# 5. WillR\ndf.ta.willr(length=14, append=True)\n\n# 6. Correlation (Pandas rolling corr)\ndf['close'].rolling(20).corr(df['volume'])\n\n# 7. Std & Median\ndf['close'].rolling(20).std()\ndf['close'].rolling(10).median()\n",
      "quiz": [
        {
          "q": "ta.crossover(a, b) 等价于？",
          "choices": [
            {
              "text": "a > b",
              "isCorrect": false
            },
            {
              "text": "a 上穿 b (本根大于，上根小于等于)",
              "isCorrect": true
            },
            {
              "text": "a >= b",
              "isCorrect": false
            }
          ],
          "explain": "crossover 严格定义为当前大于且上一个周期小于等于。"
        },
        {
          "q": "ta.valuewhen(condition, source, 0) 的作用是？",
          "choices": [
            {
              "text": "获取最近一次满足条件时的 source 值",
              "isCorrect": true
            },
            {
              "text": "获取 source 的最大值",
              "isCorrect": false
            }
          ],
          "explain": "valuewhen(cond, src, 0) 返回最近一次 cond 为 true 那一刻的 src 值。"
        },
        {
          "q": "ta.sar 是什么类型的指标？",
          "choices": [
            {
              "text": "趋势跟踪 (Trend Following)",
              "isCorrect": true
            },
            {
              "text": "震荡 (Oscillator)",
              "isCorrect": false
            }
          ],
          "explain": "Parabolic SAR (Stop and Reverse) 是经典的趋势跟踪指标。"
        }
      ],
      "category": "参考资料 (Reference)"
    },
    {
      "id": "ref_pine_params_dict",
      "title": "附录: Pine 参数词典",
      "subtitle": "参数意义 / 名称 / 用法速查（v5）",
      "concept": "<h3>Pine Script v5 参数词典 (Reference)</h3><p>这份“参数词典”专门解决一个痛点：<b>函数看得懂，但不知道每个参数到底干什么</b>。这里按用途把 Pine v5 中最常见的参数名做了一个速查汇总（覆盖日常写脚本的绝大多数场景）。</p><div style='display:flex; gap: 10px; flex-wrap: wrap; margin: 18px 0;'><a href='#ps-params-common' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>通用命名参数</a><a href='#ps-params-input' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>input 参数</a><a href='#ps-params-plot' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>绘图参数</a><a href='#ps-params-strategy' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>策略下单参数</a><a href='#ps-params-security' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>request.security 参数</a><a href='#ps-params-table' style='color: var(--accent-primary); text-decoration: none; border: 1px solid rgba(0,242,255,0.15); padding: 6px 10px; border-radius: 6px; background: rgba(0,242,255,0.05);'>table 参数</a></div><h4 id='ps-params-common'>1) 通用命名参数（很多函数都会有）</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>常见类型</th><th style='padding: 10px; border-bottom: 1px solid #333;'>出现位置</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用 / 说明</th><th style='padding: 10px; border-bottom: 1px solid #333;'>示例</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>title</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>string</td><td style='padding: 10px; border-bottom: 1px solid #333;'>indicator/strategy/plot 系列</td><td style='padding: 10px; border-bottom: 1px solid #333;'>显示名称（数据窗口、图例、设置面板）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, title='EMA')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>shorttitle</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>string</td><td style='padding: 10px; border-bottom: 1px solid #333;'>indicator/strategy</td><td style='padding: 10px; border-bottom: 1px solid #333;'>更短的显示名（常用于图表左上角）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>indicator('X', shorttitle='X')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>color / bgcolor</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>color</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot/shape/label/table</td><td style='padding: 10px; border-bottom: 1px solid #333;'>前景色/背景色。透明度推荐用 <code>color.new(c, transp)</code>。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, color=color.new(color.cyan, 0))</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>editable</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>bool</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot/shape</td><td style='padding: 10px; border-bottom: 1px solid #333;'>是否允许用户在设置中编辑该绘图。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, editable=false)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>display</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>display.*</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot/shape/label</td><td style='padding: 10px; border-bottom: 1px solid #333;'>控制显示位置（主图/数据窗口/状态线等）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, display=display.data_window)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>tooltip</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>string</td><td style='padding: 10px; border-bottom: 1px solid #333;'>input/table.cell/label</td><td style='padding: 10px; border-bottom: 1px solid #333;'>悬停提示说明。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>input.int(14, 'Len', tooltip='周期')</td></tr></table></div><h4 id='ps-params-input'>2) input.* 参数（把脚本做成可调节面板）</h4><p><code>input.*</code> 系列用于创建用户参数面板：<code>input.int</code>/<code>input.float</code>/<code>input.bool</code>/<code>input.string</code>/<code>input.source</code>/<code>input.timeframe</code>/<code>input.symbol</code> 等。</p><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用</th><th style='padding: 10px; border-bottom: 1px solid #333;'>常见用法</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>defval</td><td style='padding: 10px; border-bottom: 1px solid #333;'>默认值（输入框初始值）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>len = input.int(14, 'Length')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>minval / maxval</td><td style='padding: 10px; border-bottom: 1px solid #333;'>数值上下限（防止填错）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>len = input.int(14, 'Len', minval=1, maxval=500)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>step</td><td style='padding: 10px; border-bottom: 1px solid #333;'>步进（滚轮/按钮每次变化幅度）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>atrm = input.float(2.0, 'ATR Mult', step=0.1)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>options</td><td style='padding: 10px; border-bottom: 1px solid #333;'>下拉选项（字符串列表）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>m = input.string('EMA', 'MA', options=['EMA','SMA'])</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>group</td><td style='padding: 10px; border-bottom: 1px solid #333;'>分组（设置面板折叠分区）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>input.int(14, 'Len', group='Signal')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>inline</td><td style='padding: 10px; border-bottom: 1px solid #333;'>同一行排列多个输入控件。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>input.int(14,'A',inline='row1')\ninput.int(28,'B',inline='row1')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>confirm</td><td style='padding: 10px; border-bottom: 1px solid #333;'>修改后需确认才生效（避免误触）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>input.bool(false,'Safe',confirm=true)</td></tr></table></div><h4 id='ps-params-plot'>3) 绘图参数（plot/plotshape/plotchar）</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>出现位置</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用</th><th style='padding: 10px; border-bottom: 1px solid #333;'>示例</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>linewidth</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot</td><td style='padding: 10px; border-bottom: 1px solid #333;'>线宽。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, linewidth=2)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>style</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot/plotshape</td><td style='padding: 10px; border-bottom: 1px solid #333;'>绘制样式（如 <code>plot.style_line</code> / <code>plot.style_histogram</code>）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, style=plot.style_histogram)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>location</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plotshape/plotchar</td><td style='padding: 10px; border-bottom: 1px solid #333;'>绘制位置（K线之上/之下/顶部/底部）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plotshape(cond, location=location.belowbar)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>size</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plotshape/label</td><td style='padding: 10px; border-bottom: 1px solid #333;'>大小（<code>size.tiny</code>~<code>size.huge</code>）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plotshape(cond, size=size.small)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>offset</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot/shape/char</td><td style='padding: 10px; border-bottom: 1px solid #333;'>水平偏移（向左/右移动 N 根）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, offset=-1)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>show_last</td><td style='padding: 10px; border-bottom: 1px solid #333;'>plot</td><td style='padding: 10px; border-bottom: 1px solid #333;'>仅绘制最近 N 根，提升性能。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>plot(x, show_last=300)</td></tr></table></div><h4 id='ps-params-strategy'>4) 策略下单参数（strategy.entry / strategy.order / strategy.exit）</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用</th><th style='padding: 10px; border-bottom: 1px solid #333;'>示例</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>id</td><td style='padding: 10px; border-bottom: 1px solid #333;'>订单/持仓标识（用于 exit 关联）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>strategy.entry('L', strategy.long)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>qty / qty_percent</td><td style='padding: 10px; border-bottom: 1px solid #333;'>下单数量或按权益百分比。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>strategy.entry('L', strategy.long, qty_percent=20)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>limit / stop</td><td style='padding: 10px; border-bottom: 1px solid #333;'>限价/止损触发价（用于挂单）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>strategy.order('L1', strategy.long, limit=close-10)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>trail_points / trail_offset</td><td style='padding: 10px; border-bottom: 1px solid #333;'>跟踪止损（点数/回撤偏移）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>strategy.exit('TX','L', trail_points=150, trail_offset=80)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>when</td><td style='padding: 10px; border-bottom: 1px solid #333;'>条件触发（为 false 时不执行）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>strategy.entry('L', strategy.long, when=cond)</td></tr></table></div><h4 id='ps-params-security'>5) request.security 参数（跨周期/跨品种取值）</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用</th><th style='padding: 10px; border-bottom: 1px solid #333;'>示例</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>symbol</td><td style='padding: 10px; border-bottom: 1px solid #333;'>目标品种（字符串/合约）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>request.security('BINANCE:BTCUSDT','60',close)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>timeframe</td><td style='padding: 10px; border-bottom: 1px solid #333;'>目标周期（如 'D'/'60'）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>request.security(syminfo.tickerid,'D',close)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>expression</td><td style='padding: 10px; border-bottom: 1px solid #333;'>要取回的表达式（series）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>request.security(syminfo.tickerid,'D',ta.rsi(close,14))</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>gaps</td><td style='padding: 10px; border-bottom: 1px solid #333;'>缺口处理（<code>barmerge.gaps_on/off</code>）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>request.security(syminfo.tickerid,'D',close, gaps=barmerge.gaps_off)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>lookahead</td><td style='padding: 10px; border-bottom: 1px solid #333;'>是否未来函数（一般用 <code>barmerge.lookahead_off</code>）。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>request.security(syminfo.tickerid,'D',close, lookahead=barmerge.lookahead_off)</td></tr></table></div><h4 id='ps-params-table'>6) table 参数（做一个“仪表盘/面板”）</h4><div style='overflow-x:auto;'><table style='width:100%; border-collapse: collapse; margin: 12px 0 24px; font-size: 13px;'><tr style='background: rgba(255,255,255,0.05); text-align:left;'><th style='padding: 10px; border-bottom: 1px solid #333;'>函数</th><th style='padding: 10px; border-bottom: 1px solid #333;'>参数名</th><th style='padding: 10px; border-bottom: 1px solid #333;'>作用</th><th style='padding: 10px; border-bottom: 1px solid #333;'>示例</th></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.new</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>position, columns, rows</td><td style='padding: 10px; border-bottom: 1px solid #333;'>创建表格：位置 + 行列数。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>t = table.new(position.top_right, 3, 6)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.new</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>frame_color/frame_width</td><td style='padding: 10px; border-bottom: 1px solid #333;'>外框颜色与粗细。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.new(position.top_right,2,2, frame_color=color.gray, frame_width=1)</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.cell</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>column, row, text</td><td style='padding: 10px; border-bottom: 1px solid #333;'>定位单元格并写入文本。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.cell(t, 0, 0, 'RSI')</td></tr><tr><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.cell</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace; color: var(--accent-primary);'>text_color, bgcolor</td><td style='padding: 10px; border-bottom: 1px solid #333;'>文本颜色与背景色。</td><td style='padding: 10px; border-bottom: 1px solid #333; font-family: monospace;'>table.cell(t,1,0,'42', text_color=color.white, bgcolor=color.new(color.green,80))</td></tr></table></div><p><b>提示：</b>强烈推荐优先使用<b>命名参数</b>（例如 <code>plot(x, color=..., linewidth=..., display=...)</code>），比按顺序填参更不容易出错。</p>",
      "summary": [
        "把常见参数名按用途分组速查",
        "覆盖 input / plot / strategy / security / table 高频参数",
        "优先推荐使用命名参数，减少顺序填参错误"
      ],
      "pine_code": "//@version=5\nindicator('Params Dictionary Demo', shorttitle='PDICT', overlay=true)\n\nsrc = input.source(close, 'Source', group='Inputs')\nlen = input.int(20, 'Length', minval=1, maxval=500, step=1, tooltip='周期越大越平滑', group='Inputs')\nshow = input.bool(true, 'Show', group='Display')\n\nema = ta.ema(src, len)\nplot(show ? ema : na, title='EMA', color=color.new(color.aqua, 0), linewidth=2, display=display.all)\n\nlongCond = ta.crossover(src, ema)\nplotshape(longCond, title='Long', style=shape.triangleup, location=location.belowbar, color=color.new(color.lime, 0), size=size.tiny, text='L', textcolor=color.black)\n",
      "python_code": "",
      "quiz": [],
      "category": "参考资料 (Reference)"
    }
  ]
}